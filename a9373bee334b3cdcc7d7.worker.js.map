{"version":3,"sources":["../webpack/bootstrap","../node_modules/es5-ext/object/valid-callable.js","../node_modules/es5-ext/object/is-value.js","../node_modules/es5-ext/number/to-pos-integer.js","../node_modules/d/index.js","../node_modules/es5-ext/object/valid-value.js","../node_modules/es5-ext/object/for-each.js","../node_modules/ext/global-this/index.js","../node_modules/es5-ext/array/from/index.js","../node_modules/es5-ext/array/#/e-index-of.js","../node_modules/next-tick/index.js","../node_modules/es5-ext/object/normalize-options.js","../node_modules/memoizee/lib/resolve-length.js","../node_modules/es5-ext/object/assign/index.js","../node_modules/es5-ext/function/_define-length.js","../node_modules/es5-ext/object/mixin.js","../node_modules/type/value/is.js","../node_modules/es6-symbol/validate-symbol.js","../node_modules/es5-ext/object/map.js","../node_modules/process/browser.js","../node_modules/webpack/buildin/global.js","../node_modules/es5-ext/object/is-callable.js","../node_modules/is-promise/index.js","../node_modules/memoizee/index.js","../node_modules/es5-ext/function/noop.js","../node_modules/es5-ext/number/to-integer.js","../node_modules/es5-ext/math/sign/index.js","../node_modules/es5-ext/math/sign/is-implemented.js","../node_modules/es5-ext/math/sign/shim.js","../node_modules/memoizee/plain.js","../node_modules/es5-ext/object/_iterate.js","../node_modules/memoizee/lib/configure-map.js","../node_modules/es5-ext/error/custom.js","../node_modules/es5-ext/object/assign/is-implemented.js","../node_modules/es5-ext/object/assign/shim.js","../node_modules/es5-ext/object/keys/index.js","../node_modules/es5-ext/object/keys/is-implemented.js","../node_modules/es5-ext/object/keys/shim.js","../node_modules/es5-ext/object/is-object.js","../node_modules/type/plain-function/is.js","../node_modules/type/function/is.js","../node_modules/type/prototype/is.js","../node_modules/type/object/is.js","../node_modules/es5-ext/string/#/contains/index.js","../node_modules/es5-ext/string/#/contains/is-implemented.js","../node_modules/es5-ext/string/#/contains/shim.js","../node_modules/event-emitter/index.js","../node_modules/memoizee/lib/resolve-resolve.js","../node_modules/es5-ext/array/to-array.js","../node_modules/es5-ext/array/from/is-implemented.js","../node_modules/es5-ext/array/from/shim.js","../node_modules/es6-symbol/index.js","../node_modules/es6-symbol/is-implemented.js","../node_modules/ext/global-this/is-implemented.js","../node_modules/ext/global-this/implementation.js","../node_modules/es6-symbol/polyfill.js","../node_modules/es6-symbol/is-symbol.js","../node_modules/es6-symbol/lib/private/generate-name.js","../node_modules/es6-symbol/lib/private/setup/standard-symbols.js","../node_modules/es6-symbol/lib/private/setup/symbol-registry.js","../node_modules/es5-ext/function/is-arguments.js","../node_modules/es5-ext/function/is-function.js","../node_modules/es5-ext/string/is-string.js","../node_modules/memoizee/lib/resolve-normalize.js","../node_modules/memoizee/normalizers/primitive.js","../node_modules/memoizee/normalizers/get-primitive-fixed.js","../node_modules/memoizee/normalizers/get.js","../node_modules/es5-ext/number/is-nan/index.js","../node_modules/es5-ext/number/is-nan/is-implemented.js","../node_modules/es5-ext/number/is-nan/shim.js","../node_modules/memoizee/normalizers/get-1.js","../node_modules/memoizee/normalizers/get-fixed.js","../node_modules/memoizee/ext/async.js","../node_modules/timers-browserify/main.js","../node_modules/setimmediate/setImmediate.js","../node_modules/memoizee/ext/promise.js","../node_modules/es5-ext/object/primitive-set.js","../node_modules/es5-ext/object/validate-stringifiable-value.js","../node_modules/es5-ext/object/validate-stringifiable.js","../node_modules/es5-ext/to-short-string-representation.js","../node_modules/es5-ext/safe-to-string.js","../node_modules/memoizee/ext/dispose.js","../node_modules/memoizee/ext/max-age.js","../node_modules/timers-ext/valid-timeout.js","../node_modules/timers-ext/max-timeout.js","../node_modules/memoizee/ext/max.js","../node_modules/lru-queue/index.js","../node_modules/memoizee/ext/ref-counter.js","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","engine/board.js","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","engine/pieces.js","engine/move-generation.js","engine/engine.js","engine/web.worker.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","fn","TypeError","_undefined","val","toInteger","max","Math","isValue","isPlainFunction","assign","normalizeOpts","contains","dscr","e","w","options","desc","arguments","length","configurable","writable","gs","set","undefined","globalThis","Array","from","numberIsNaN","toPosInt","indexOf","objHasOwnProperty","abs","floor","searchElement","fromIndex","apply","this","isNaN","callable","byObserver","Observer","queue","currentQueue","node","document","createTextNode","callback","concat","data","shift","observe","characterData","push","process","nextTick","MutationObserver","WebKitMutationObserver","setImmediate","cb","setTimeout","forEach","src","obj","opts1","result","optsLength","fnLength","isAsync","generate","mixin","test","arg1","arg2","ignore","cache","args","toString","Function","join","target","getOwnPropertyDescriptor","getOwnPropertyNames","getOwnPropertySymbols","source","error","sourceObject","symbol","isSymbol","thisArg","targetObj","index","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","clearTimeout","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","len","run","marker","runClearTimeout","Item","array","noop","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","g","window","then","resolveLength","plain","normalizer","async","primitive","promise","dispose","maxAge","refCounter","sign","Number","isFinite","extensions","configure","self","conf","force","extFn","__profiler__","updateEnv","memoized","keys","objPropertyIsEnumerable","propertyIsEnumerable","method","defVal","list","compareFn","sort","customError","defineLength","ee","methods","resolveResolve","resolveNormalize","defineProperties","_on","original","memLength","_get","del","_clear","extDel","extGet","extHas","getListeners","setListeners","deleteListeners","resolve","delete","clear","resolvers","arg","id","String","profileName","has","oldCache","type","listener","__memoized__","_has","isObject","captureStackTrace","message","err","code","ext","foo","bar","trzy","dest","map","function","isFunction","classRe","functionToString","isPrototype","constructor","possibleTypes","str","searchString","_once2","descriptors","base","descriptor","_once","__eeOnceListener__","__ee__","candidate","splice","slice","resolveArgs","toArray","isArray","arrayLike","arr","Boolean","iteratorSymbol","iterator","isArguments","validValue","isString","Context","j","getIterator","mapFn","next","done","charCodeAt","global","validTypes","toPrimitive","naiveFallback","__global__","SymbolPolyfill","HiddenSymbol","isNativeSafe","validateSymbol","NativeSymbol","generateName","setupStandardSymbols","setupSymbolRegistry","description","__description__","__name__","valueOf","objPrototype","created","ie11BugWorkaround","postfix","hasInstance","isConcatSpreadable","match","replace","search","species","split","unscopables","registry","for","keyFor","objToString","isFunctionStringTag","RegExp","userNormalizer","currentLength","lastId","path","pop","NaN","argsMap","aFrom","objectMap","tbi","currentCallback","currentContext","currentArgs","waiting","last","context","origCb","Timeout","clearFn","_id","_clearFn","scope","setInterval","clearInterval","close","unref","ref","enroll","item","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","clearImmediate","registerImmediate","nextHandle","tasksByHandle","currentlyRunningATask","doc","attachTo","getPrototypeOf","handle","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","messagePrefix","random","onGlobalMessage","event","addEventListener","attachEvent","installPostMessageImplementation","MessageChannel","channel","port1","port2","installMessageChannelImplementation","createElement","html","documentElement","script","onreadystatechange","removeChild","appendChild","installReadyStateChangeImplementation","task","primitiveSet","ensureString","toShortString","isPromise","supportedModes","promises","isFailed","onSuccess","count","onFailure","resolvedMode","nextTickFailure","finally","ensureValue","stringifiable","isCallable","safeToString","reNewLine","string","char","JSON","stringify","resultArray","min","timeouts","preFetchAge","preFetchTimeouts","preFetch","maxTimeout","toPosInteger","lruQueue","hit","limit","size","oldIndex","nuIndex","deleteRef","getRefCount","_slicedToArray","_arr","_n","_d","_e","_s","_i","_defineProperty","EN_PASSANT","arr2","iter","getState","board","whiteKingMoved","blackKingMoved","whiteLeftRookMoved","whiteRightRookMoved","blackLeftRookMoved","blackRightRookMoved","setWhiteLeftRookMoved","setWhiteRightRookMoved","setBlackLeftRookMoved","setBlackRightRookMoved","pieces","PAWN","KNIGHT","BISHOP","ROOK","QUEEN","KING","piecesSortedById","values","pieceA","pieceB","getPieceById","pieceId","P","R","K","isValidPawnMove","activeColor","piece","start","end","ignoreCheck","pieceColor","targetPieceColor","moveResultsInCheck","direction","baseLineStart","baseLineEnd","isBaseLine","noObstacleInBetween","enPassentPossible","pos","state","getPromoPieces","KNIGHT_DIRECTIONS","isValidKnightMove","some","DIAGONAL_DIRECTIONS","isValidBishopMove","generateBishopMoves","flatMap","offset","moves","ORTHOGONAL_DIRECTIONS","isValidRookMove","generateRookMoves","KING_DIRECTIONS","isValidKingMove","isAttacked","validDirection","performMove","move","removedFigure","enPassant","setWhiteKingMoved","setBlackKingMoved","clearEnPassentPossible","setEnPassentPossible","color","undoMove","previousState","isInCheck","kingPos","findIndex","check","isValidMoveFns","opponentColor","position","isValidMove","generateMovesFns","filter","promoPiece","generateMoves","generateMovesFn","isCheckMate","boardRowFromIndex","evaluatePosition","materialValue","positionValue","whiteBishops","blackBishops","whiteKnights","blackKnights","whitePawnRows","blackPawnRows","rowBitPattern","castleValue","evaluateMoveScore","score","movesSortedByScore","playerColor","moveA","moveB","findBestMove","remainingHalfMoves","recFindBestMove","adjustScore","realDepth","alpha","beta","remainingLevels","depth","isRoot","bestScore","bestMove","findMoveFn","memRecFindBestMove","memoize","boardKey","calculateMove","console","log","f","params","__webpack_exports__","Promise","reject","catch","stack"],"mappings":"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","file":"a9373bee334b3cdcc7d7.worker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/chess/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 88);\n","\"use strict\";\n\nmodule.exports = function (fn) {\n  if (typeof fn !== \"function\") throw new TypeError(fn + \" is not a function\");\n  return fn;\n};","\"use strict\";\n\nvar _undefined = require(\"../function/noop\")(); // Support ES3 engines\n\n\nmodule.exports = function (val) {\n  return val !== _undefined && val !== null;\n};","\"use strict\";\n\nvar toInteger = require(\"./to-integer\"),\n    max = Math.max;\n\nmodule.exports = function (value) {\n  return max(0, toInteger(value));\n};","\"use strict\";\n\nvar isValue = require(\"type/value/is\"),\n    isPlainFunction = require(\"type/plain-function/is\"),\n    assign = require(\"es5-ext/object/assign\"),\n    normalizeOpts = require(\"es5-ext/object/normalize-options\"),\n    contains = require(\"es5-ext/string/#/contains\");\n\nvar d = module.exports = function (dscr, value\n/*, options*/\n) {\n  var c, e, w, options, desc;\n\n  if (arguments.length < 2 || typeof dscr !== \"string\") {\n    options = value;\n    value = dscr;\n    dscr = null;\n  } else {\n    options = arguments[2];\n  }\n\n  if (isValue(dscr)) {\n    c = contains.call(dscr, \"c\");\n    e = contains.call(dscr, \"e\");\n    w = contains.call(dscr, \"w\");\n  } else {\n    c = w = true;\n    e = false;\n  }\n\n  desc = {\n    value: value,\n    configurable: c,\n    enumerable: e,\n    writable: w\n  };\n  return !options ? desc : assign(normalizeOpts(options), desc);\n};\n\nd.gs = function (dscr, get, set\n/*, options*/\n) {\n  var c, e, options, desc;\n\n  if (typeof dscr !== \"string\") {\n    options = set;\n    set = get;\n    get = dscr;\n    dscr = null;\n  } else {\n    options = arguments[3];\n  }\n\n  if (!isValue(get)) {\n    get = undefined;\n  } else if (!isPlainFunction(get)) {\n    options = get;\n    get = set = undefined;\n  } else if (!isValue(set)) {\n    set = undefined;\n  } else if (!isPlainFunction(set)) {\n    options = set;\n    set = undefined;\n  }\n\n  if (isValue(dscr)) {\n    c = contains.call(dscr, \"c\");\n    e = contains.call(dscr, \"e\");\n  } else {\n    c = true;\n    e = false;\n  }\n\n  desc = {\n    get: get,\n    set: set,\n    configurable: c,\n    enumerable: e\n  };\n  return !options ? desc : assign(normalizeOpts(options), desc);\n};","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nmodule.exports = function (value) {\n  if (!isValue(value)) throw new TypeError(\"Cannot use null or undefined\");\n  return value;\n};","\"use strict\";\n\nmodule.exports = require(\"./_iterate\")(\"forEach\");","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? globalThis : require(\"./implementation\");","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Array.from : require(\"./shim\");","\"use strict\";\n\nvar numberIsNaN = require(\"../../number/is-nan\"),\n    toPosInt = require(\"../../number/to-pos-integer\"),\n    value = require(\"../../object/valid-value\"),\n    indexOf = Array.prototype.indexOf,\n    objHasOwnProperty = Object.prototype.hasOwnProperty,\n    abs = Math.abs,\n    floor = Math.floor;\n\nmodule.exports = function (searchElement\n/*, fromIndex*/\n) {\n  var i, length, fromIndex, val;\n  if (!numberIsNaN(searchElement)) return indexOf.apply(this, arguments);\n  length = toPosInt(value(this).length);\n  fromIndex = arguments[1];\n  if (isNaN(fromIndex)) fromIndex = 0;else if (fromIndex >= 0) fromIndex = floor(fromIndex);else fromIndex = toPosInt(this.length) - floor(abs(fromIndex));\n\n  for (i = fromIndex; i < length; ++i) {\n    if (objHasOwnProperty.call(this, i)) {\n      val = this[i];\n      if (numberIsNaN(val)) return i; // Jslint: ignore\n    }\n  }\n\n  return -1;\n};","'use strict';\n\nvar callable, byObserver;\n\ncallable = function callable(fn) {\n  if (typeof fn !== 'function') throw new TypeError(fn + \" is not a function\");\n  return fn;\n};\n\nbyObserver = function byObserver(Observer) {\n  var node = document.createTextNode(''),\n      queue,\n      currentQueue,\n      i = 0;\n  new Observer(function () {\n    var callback;\n\n    if (!queue) {\n      if (!currentQueue) return;\n      queue = currentQueue;\n    } else if (currentQueue) {\n      queue = currentQueue.concat(queue);\n    }\n\n    currentQueue = queue;\n    queue = null;\n\n    if (typeof currentQueue === 'function') {\n      callback = currentQueue;\n      currentQueue = null;\n      callback();\n      return;\n    }\n\n    node.data = i = ++i % 2; // Invoke other batch, to handle leftover callbacks in case of crash\n\n    while (currentQueue) {\n      callback = currentQueue.shift();\n      if (!currentQueue.length) currentQueue = null;\n      callback();\n    }\n  }).observe(node, {\n    characterData: true\n  });\n  return function (fn) {\n    callable(fn);\n\n    if (queue) {\n      if (typeof queue === 'function') queue = [queue, fn];else queue.push(fn);\n      return;\n    }\n\n    queue = fn;\n    node.data = i = ++i % 2;\n  };\n};\n\nmodule.exports = function () {\n  // Node.js\n  if (typeof process === 'object' && process && typeof process.nextTick === 'function') {\n    return process.nextTick;\n  } // MutationObserver\n\n\n  if (typeof document === 'object' && document) {\n    if (typeof MutationObserver === 'function') return byObserver(MutationObserver);\n    if (typeof WebKitMutationObserver === 'function') return byObserver(WebKitMutationObserver);\n  } // W3C Draft\n  // http://dvcs.w3.org/hg/webperf/raw-file/tip/specs/setImmediate/Overview.html\n\n\n  if (typeof setImmediate === 'function') {\n    return function (cb) {\n      setImmediate(callable(cb));\n    };\n  } // Wide available standard\n\n\n  if (typeof setTimeout === 'function' || typeof setTimeout === 'object') {\n    return function (cb) {\n      setTimeout(callable(cb), 0);\n    };\n  }\n\n  return null;\n}();","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nvar forEach = Array.prototype.forEach,\n    create = Object.create;\n\nvar process = function process(src, obj) {\n  var key;\n\n  for (key in src) {\n    obj[key] = src[key];\n  }\n}; // eslint-disable-next-line no-unused-vars\n\n\nmodule.exports = function (opts1\n/*, options*/\n) {\n  var result = create(null);\n  forEach.call(arguments, function (options) {\n    if (!isValue(options)) return;\n    process(Object(options), result);\n  });\n  return result;\n};","\"use strict\";\n\nvar toPosInt = require(\"es5-ext/number/to-pos-integer\");\n\nmodule.exports = function (optsLength, fnLength, isAsync) {\n  var length;\n\n  if (isNaN(optsLength)) {\n    length = fnLength;\n    if (!(length >= 0)) return 1;\n    if (isAsync && length) return length - 1;\n    return length;\n  }\n\n  if (optsLength === false) return false;\n  return toPosInt(optsLength);\n};","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.assign : require(\"./shim\");","\"use strict\";\n\nvar toPosInt = require(\"../number/to-pos-integer\");\n\nvar test = function test(arg1, arg2) {\n  return arg2;\n};\n\nvar desc, defineProperty, generate, mixin;\n\ntry {\n  Object.defineProperty(test, \"length\", {\n    configurable: true,\n    writable: false,\n    enumerable: false,\n    value: 1\n  });\n} catch (ignore) {}\n\nif (test.length === 1) {\n  // ES6\n  desc = {\n    configurable: true,\n    writable: false,\n    enumerable: false\n  };\n  defineProperty = Object.defineProperty;\n\n  module.exports = function (fn, length) {\n    length = toPosInt(length);\n    if (fn.length === length) return fn;\n    desc.value = length;\n    return defineProperty(fn, \"length\", desc);\n  };\n} else {\n  mixin = require(\"../object/mixin\");\n\n  generate = function () {\n    var cache = [];\n    return function (length) {\n      var args,\n          i = 0;\n      if (cache[length]) return cache[length];\n      args = [];\n\n      while (length--) {\n        args.push(\"a\" + (++i).toString(36));\n      } // eslint-disable-next-line no-new-func\n\n\n      return new Function(\"fn\", \"return function (\" + args.join(\", \") + \") { return fn.apply(this, arguments); };\");\n    };\n  }();\n\n  module.exports = function (src, length) {\n    var target;\n    length = toPosInt(length);\n    if (src.length === length) return src;\n    target = generate(length)(src);\n\n    try {\n      mixin(target, src);\n    } catch (ignore) {}\n\n    return target;\n  };\n}","\"use strict\";\n\nvar value = require(\"./valid-value\"),\n    defineProperty = Object.defineProperty,\n    getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor,\n    getOwnPropertyNames = Object.getOwnPropertyNames,\n    getOwnPropertySymbols = Object.getOwnPropertySymbols;\n\nmodule.exports = function (target, source) {\n  var error,\n      sourceObject = Object(value(source));\n  target = Object(value(target));\n  getOwnPropertyNames(sourceObject).forEach(function (name) {\n    try {\n      defineProperty(target, name, getOwnPropertyDescriptor(source, name));\n    } catch (e) {\n      error = e;\n    }\n  });\n\n  if (typeof getOwnPropertySymbols === \"function\") {\n    getOwnPropertySymbols(sourceObject).forEach(function (symbol) {\n      try {\n        defineProperty(target, symbol, getOwnPropertyDescriptor(source, symbol));\n      } catch (e) {\n        error = e;\n      }\n    });\n  }\n\n  if (error !== undefined) throw error;\n  return target;\n};","\"use strict\"; // ES3 safe\n\nvar _undefined = void 0;\n\nmodule.exports = function (value) {\n  return value !== _undefined && value !== null;\n};","\"use strict\";\n\nvar isSymbol = require(\"./is-symbol\");\n\nmodule.exports = function (value) {\n  if (!isSymbol(value)) throw new TypeError(value + \" is not a symbol\");\n  return value;\n};","\"use strict\";\n\nvar callable = require(\"./valid-callable\"),\n    forEach = require(\"./for-each\"),\n    call = Function.prototype.call;\n\nmodule.exports = function (obj, cb\n/*, thisArg*/\n) {\n  var result = {},\n      thisArg = arguments[2];\n  callable(cb);\n  forEach(obj, function (value, key, targetObj, index) {\n    result[key] = call.call(cb, thisArg, value, key, targetObj, index);\n  });\n  return result;\n};","// shim for using process in browser\nvar process = module.exports = {}; // cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n  throw new Error('setTimeout has not been defined');\n}\n\nfunction defaultClearTimeout() {\n  throw new Error('clearTimeout has not been defined');\n}\n\n(function () {\n  try {\n    if (typeof setTimeout === 'function') {\n      cachedSetTimeout = setTimeout;\n    } else {\n      cachedSetTimeout = defaultSetTimout;\n    }\n  } catch (e) {\n    cachedSetTimeout = defaultSetTimout;\n  }\n\n  try {\n    if (typeof clearTimeout === 'function') {\n      cachedClearTimeout = clearTimeout;\n    } else {\n      cachedClearTimeout = defaultClearTimeout;\n    }\n  } catch (e) {\n    cachedClearTimeout = defaultClearTimeout;\n  }\n})();\n\nfunction runTimeout(fun) {\n  if (cachedSetTimeout === setTimeout) {\n    //normal enviroments in sane situations\n    return setTimeout(fun, 0);\n  } // if setTimeout wasn't available but was latter defined\n\n\n  if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n    cachedSetTimeout = setTimeout;\n    return setTimeout(fun, 0);\n  }\n\n  try {\n    // when when somebody has screwed with setTimeout but no I.E. maddness\n    return cachedSetTimeout(fun, 0);\n  } catch (e) {\n    try {\n      // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n      return cachedSetTimeout.call(null, fun, 0);\n    } catch (e) {\n      // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n      return cachedSetTimeout.call(this, fun, 0);\n    }\n  }\n}\n\nfunction runClearTimeout(marker) {\n  if (cachedClearTimeout === clearTimeout) {\n    //normal enviroments in sane situations\n    return clearTimeout(marker);\n  } // if clearTimeout wasn't available but was latter defined\n\n\n  if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n    cachedClearTimeout = clearTimeout;\n    return clearTimeout(marker);\n  }\n\n  try {\n    // when when somebody has screwed with setTimeout but no I.E. maddness\n    return cachedClearTimeout(marker);\n  } catch (e) {\n    try {\n      // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n      return cachedClearTimeout.call(null, marker);\n    } catch (e) {\n      // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n      // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n      return cachedClearTimeout.call(this, marker);\n    }\n  }\n}\n\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n  if (!draining || !currentQueue) {\n    return;\n  }\n\n  draining = false;\n\n  if (currentQueue.length) {\n    queue = currentQueue.concat(queue);\n  } else {\n    queueIndex = -1;\n  }\n\n  if (queue.length) {\n    drainQueue();\n  }\n}\n\nfunction drainQueue() {\n  if (draining) {\n    return;\n  }\n\n  var timeout = runTimeout(cleanUpNextTick);\n  draining = true;\n  var len = queue.length;\n\n  while (len) {\n    currentQueue = queue;\n    queue = [];\n\n    while (++queueIndex < len) {\n      if (currentQueue) {\n        currentQueue[queueIndex].run();\n      }\n    }\n\n    queueIndex = -1;\n    len = queue.length;\n  }\n\n  currentQueue = null;\n  draining = false;\n  runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n  var args = new Array(arguments.length - 1);\n\n  if (arguments.length > 1) {\n    for (var i = 1; i < arguments.length; i++) {\n      args[i - 1] = arguments[i];\n    }\n  }\n\n  queue.push(new Item(fun, args));\n\n  if (queue.length === 1 && !draining) {\n    runTimeout(drainQueue);\n  }\n}; // v8 likes predictible objects\n\n\nfunction Item(fun, array) {\n  this.fun = fun;\n  this.array = array;\n}\n\nItem.prototype.run = function () {\n  this.fun.apply(null, this.array);\n};\n\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\n\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) {\n  return [];\n};\n\nprocess.binding = function (name) {\n  throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () {\n  return '/';\n};\n\nprocess.chdir = function (dir) {\n  throw new Error('process.chdir is not supported');\n};\n\nprocess.umask = function () {\n  return 0;\n};","var g; // This works in non-strict mode\n\ng = function () {\n  return this;\n}();\n\ntry {\n  // This works if eval is allowed (see CSP)\n  g = g || new Function(\"return this\")();\n} catch (e) {\n  // This works if the window reference is available\n  if (typeof window === \"object\") g = window;\n} // g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\n\nmodule.exports = g;","// Deprecated\n\"use strict\";\n\nmodule.exports = function (obj) {\n  return typeof obj === \"function\";\n};","module.exports = isPromise;\n\nfunction isPromise(obj) {\n  return !!obj && (typeof obj === 'object' || typeof obj === 'function') && typeof obj.then === 'function';\n}","\"use strict\";\n\nvar normalizeOpts = require(\"es5-ext/object/normalize-options\"),\n    resolveLength = require(\"./lib/resolve-length\"),\n    plain = require(\"./plain\");\n\nmodule.exports = function (fn\n/*, options*/\n) {\n  var options = normalizeOpts(arguments[1]),\n      length;\n\n  if (!options.normalizer) {\n    length = options.length = resolveLength(options.length, fn.length, options.async);\n\n    if (length !== 0) {\n      if (options.primitive) {\n        if (length === false) {\n          options.normalizer = require(\"./normalizers/primitive\");\n        } else if (length > 1) {\n          options.normalizer = require(\"./normalizers/get-primitive-fixed\")(length);\n        }\n      } else if (length === false) options.normalizer = require(\"./normalizers/get\")();else if (length === 1) options.normalizer = require(\"./normalizers/get-1\")();else options.normalizer = require(\"./normalizers/get-fixed\")(length);\n    }\n  } // Assure extensions\n\n\n  if (options.async) require(\"./ext/async\");\n  if (options.promise) require(\"./ext/promise\");\n  if (options.dispose) require(\"./ext/dispose\");\n  if (options.maxAge) require(\"./ext/max-age\");\n  if (options.max) require(\"./ext/max\");\n  if (options.refCounter) require(\"./ext/ref-counter\");\n  return plain(fn, options);\n};","\"use strict\"; // eslint-disable-next-line no-empty-function\n\nmodule.exports = function () {};","\"use strict\";\n\nvar sign = require(\"../math/sign\"),\n    abs = Math.abs,\n    floor = Math.floor;\n\nmodule.exports = function (value) {\n  if (isNaN(value)) return 0;\n  value = Number(value);\n  if (value === 0 || !isFinite(value)) return value;\n  return sign(value) * floor(abs(value));\n};","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Math.sign : require(\"./shim\");","\"use strict\";\n\nmodule.exports = function () {\n  var sign = Math.sign;\n  if (typeof sign !== \"function\") return false;\n  return sign(10) === 1 && sign(-20) === -1;\n};","\"use strict\";\n\nmodule.exports = function (value) {\n  value = Number(value);\n  if (isNaN(value) || value === 0) return value;\n  return value > 0 ? 1 : -1;\n};","\"use strict\";\n\nvar callable = require(\"es5-ext/object/valid-callable\"),\n    forEach = require(\"es5-ext/object/for-each\"),\n    extensions = require(\"./lib/registered-extensions\"),\n    configure = require(\"./lib/configure-map\"),\n    resolveLength = require(\"./lib/resolve-length\");\n\nmodule.exports = function self(fn\n/*, options */\n) {\n  var options, length, conf;\n  callable(fn);\n  options = Object(arguments[1]);\n\n  if (options.async && options.promise) {\n    throw new Error(\"Options 'async' and 'promise' cannot be used together\");\n  } // Do not memoize already memoized function\n\n\n  if (hasOwnProperty.call(fn, \"__memoized__\") && !options.force) return fn; // Resolve length;\n\n  length = resolveLength(options.length, fn.length, options.async && extensions.async); // Configure cache map\n\n  conf = configure(fn, length, options); // Bind eventual extensions\n\n  forEach(extensions, function (extFn, name) {\n    if (options[name]) extFn(options[name], conf, options);\n  });\n  if (self.__profiler__) self.__profiler__(conf);\n  conf.updateEnv();\n  return conf.memoized;\n};","// Internal method, used by iteration functions.\n// Calls a function for each key-value pair found in object\n// Optionally takes compareFn to iterate object in specific order\n\"use strict\";\n\nvar callable = require(\"./valid-callable\"),\n    value = require(\"./valid-value\"),\n    bind = Function.prototype.bind,\n    call = Function.prototype.call,\n    keys = Object.keys,\n    objPropertyIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nmodule.exports = function (method, defVal) {\n  return function (obj, cb\n  /*, thisArg, compareFn*/\n  ) {\n    var list,\n        thisArg = arguments[2],\n        compareFn = arguments[3];\n    obj = Object(value(obj));\n    callable(cb);\n    list = keys(obj);\n\n    if (compareFn) {\n      list.sort(typeof compareFn === \"function\" ? bind.call(compareFn, obj) : undefined);\n    }\n\n    if (typeof method !== \"function\") method = list[method];\n    return call.call(method, list, function (key, index) {\n      if (!objPropertyIsEnumerable.call(obj, key)) return defVal;\n      return call.call(cb, thisArg, obj[key], key, obj, index);\n    });\n  };\n};","/* eslint no-eq-null: 0, eqeqeq: 0, no-unused-vars: 0 */\n\"use strict\";\n\nvar customError = require(\"es5-ext/error/custom\"),\n    defineLength = require(\"es5-ext/function/_define-length\"),\n    d = require(\"d\"),\n    ee = require(\"event-emitter\").methods,\n    resolveResolve = require(\"./resolve-resolve\"),\n    resolveNormalize = require(\"./resolve-normalize\");\n\nvar apply = Function.prototype.apply,\n    call = Function.prototype.call,\n    create = Object.create,\n    defineProperties = Object.defineProperties,\n    _on = ee.on,\n    emit = ee.emit;\n\nmodule.exports = function (original, length, options) {\n  var cache = create(null),\n      conf,\n      memLength,\n      _get,\n      set,\n      del,\n      _clear,\n      extDel,\n      extGet,\n      extHas,\n      normalizer,\n      getListeners,\n      setListeners,\n      deleteListeners,\n      memoized,\n      resolve;\n\n  if (length !== false) memLength = length;else if (isNaN(original.length)) memLength = 1;else memLength = original.length;\n\n  if (options.normalizer) {\n    normalizer = resolveNormalize(options.normalizer);\n    _get = normalizer.get;\n    set = normalizer.set;\n    del = normalizer.delete;\n    _clear = normalizer.clear;\n  }\n\n  if (options.resolvers != null) resolve = resolveResolve(options.resolvers);\n\n  if (_get) {\n    memoized = defineLength(function (arg) {\n      var id,\n          result,\n          args = arguments;\n      if (resolve) args = resolve(args);\n      id = _get(args);\n\n      if (id !== null) {\n        if (hasOwnProperty.call(cache, id)) {\n          if (getListeners) conf.emit(\"get\", id, args, this);\n          return cache[id];\n        }\n      }\n\n      if (args.length === 1) result = call.call(original, this, args[0]);else result = apply.call(original, this, args);\n\n      if (id === null) {\n        id = _get(args);\n        if (id !== null) throw customError(\"Circular invocation\", \"CIRCULAR_INVOCATION\");\n        id = set(args);\n      } else if (hasOwnProperty.call(cache, id)) {\n        throw customError(\"Circular invocation\", \"CIRCULAR_INVOCATION\");\n      }\n\n      cache[id] = result;\n      if (setListeners) conf.emit(\"set\", id, null, result);\n      return result;\n    }, memLength);\n  } else if (length === 0) {\n    memoized = function memoized() {\n      var result;\n\n      if (hasOwnProperty.call(cache, \"data\")) {\n        if (getListeners) conf.emit(\"get\", \"data\", arguments, this);\n        return cache.data;\n      }\n\n      if (arguments.length) result = apply.call(original, this, arguments);else result = call.call(original, this);\n\n      if (hasOwnProperty.call(cache, \"data\")) {\n        throw customError(\"Circular invocation\", \"CIRCULAR_INVOCATION\");\n      }\n\n      cache.data = result;\n      if (setListeners) conf.emit(\"set\", \"data\", null, result);\n      return result;\n    };\n  } else {\n    memoized = function memoized(arg) {\n      var result,\n          args = arguments,\n          id;\n      if (resolve) args = resolve(arguments);\n      id = String(args[0]);\n\n      if (hasOwnProperty.call(cache, id)) {\n        if (getListeners) conf.emit(\"get\", id, args, this);\n        return cache[id];\n      }\n\n      if (args.length === 1) result = call.call(original, this, args[0]);else result = apply.call(original, this, args);\n\n      if (hasOwnProperty.call(cache, id)) {\n        throw customError(\"Circular invocation\", \"CIRCULAR_INVOCATION\");\n      }\n\n      cache[id] = result;\n      if (setListeners) conf.emit(\"set\", id, null, result);\n      return result;\n    };\n  }\n\n  conf = {\n    original: original,\n    memoized: memoized,\n    profileName: options.profileName,\n    get: function get(args) {\n      if (resolve) args = resolve(args);\n      if (_get) return _get(args);\n      return String(args[0]);\n    },\n    has: function has(id) {\n      return hasOwnProperty.call(cache, id);\n    },\n    delete: function _delete(id) {\n      var result;\n      if (!hasOwnProperty.call(cache, id)) return;\n      if (del) del(id);\n      result = cache[id];\n      delete cache[id];\n      if (deleteListeners) conf.emit(\"delete\", id, result);\n    },\n    clear: function clear() {\n      var oldCache = cache;\n      if (_clear) _clear();\n      cache = create(null);\n      conf.emit(\"clear\", oldCache);\n    },\n    on: function on(type, listener) {\n      if (type === \"get\") getListeners = true;else if (type === \"set\") setListeners = true;else if (type === \"delete\") deleteListeners = true;\n      return _on.call(this, type, listener);\n    },\n    emit: emit,\n    updateEnv: function updateEnv() {\n      original = conf.original;\n    }\n  };\n\n  if (_get) {\n    extDel = defineLength(function (arg) {\n      var id,\n          args = arguments;\n      if (resolve) args = resolve(args);\n      id = _get(args);\n      if (id === null) return;\n      conf.delete(id);\n    }, memLength);\n  } else if (length === 0) {\n    extDel = function extDel() {\n      return conf.delete(\"data\");\n    };\n  } else {\n    extDel = function extDel(arg) {\n      if (resolve) arg = resolve(arguments)[0];\n      return conf.delete(arg);\n    };\n  }\n\n  extGet = defineLength(function () {\n    var id,\n        args = arguments;\n    if (length === 0) return cache.data;\n    if (resolve) args = resolve(args);\n    if (_get) id = _get(args);else id = String(args[0]);\n    return cache[id];\n  });\n  extHas = defineLength(function () {\n    var id,\n        args = arguments;\n    if (length === 0) return conf.has(\"data\");\n    if (resolve) args = resolve(args);\n    if (_get) id = _get(args);else id = String(args[0]);\n    if (id === null) return false;\n    return conf.has(id);\n  });\n  defineProperties(memoized, {\n    __memoized__: d(true),\n    delete: d(extDel),\n    clear: d(conf.clear),\n    _get: d(extGet),\n    _has: d(extHas)\n  });\n  return conf;\n};","\"use strict\";\n\nvar assign = require(\"../object/assign\"),\n    isObject = require(\"../object/is-object\"),\n    isValue = require(\"../object/is-value\"),\n    captureStackTrace = Error.captureStackTrace;\n\nexports = module.exports = function (message\n/*, code, ext*/\n) {\n  var err = new Error(message),\n      code = arguments[1],\n      ext = arguments[2];\n\n  if (!isValue(ext)) {\n    if (isObject(code)) {\n      ext = code;\n      code = null;\n    }\n  }\n\n  if (isValue(ext)) assign(err, ext);\n  if (isValue(code)) err.code = code;\n  if (captureStackTrace) captureStackTrace(err, exports);\n  return err;\n};","\"use strict\";\n\nmodule.exports = function () {\n  var assign = Object.assign,\n      obj;\n  if (typeof assign !== \"function\") return false;\n  obj = {\n    foo: \"raz\"\n  };\n  assign(obj, {\n    bar: \"dwa\"\n  }, {\n    trzy: \"trzy\"\n  });\n  return obj.foo + obj.bar + obj.trzy === \"razdwatrzy\";\n};","\"use strict\";\n\nvar keys = require(\"../keys\"),\n    value = require(\"../valid-value\"),\n    max = Math.max;\n\nmodule.exports = function (dest, src\n/*, srcn*/\n) {\n  var error,\n      i,\n      length = max(arguments.length, 2),\n      assign;\n  dest = Object(value(dest));\n\n  assign = function assign(key) {\n    try {\n      dest[key] = src[key];\n    } catch (e) {\n      if (!error) error = e;\n    }\n  };\n\n  for (i = 1; i < length; ++i) {\n    src = arguments[i];\n    keys(src).forEach(assign);\n  }\n\n  if (error !== undefined) throw error;\n  return dest;\n};","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.keys : require(\"./shim\");","\"use strict\";\n\nmodule.exports = function () {\n  try {\n    Object.keys(\"primitive\");\n    return true;\n  } catch (e) {\n    return false;\n  }\n};","\"use strict\";\n\nvar isValue = require(\"../is-value\");\n\nvar keys = Object.keys;\n\nmodule.exports = function (object) {\n  return keys(isValue(object) ? Object(object) : object);\n};","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nvar map = {\n  function: true,\n  object: true\n};\n\nmodule.exports = function (value) {\n  return isValue(value) && map[typeof value] || false;\n};","\"use strict\";\n\nvar isFunction = require(\"../function/is\");\n\nvar classRe = /^\\s*class[\\s{/}]/,\n    functionToString = Function.prototype.toString;\n\nmodule.exports = function (value) {\n  if (!isFunction(value)) return false;\n  if (classRe.test(functionToString.call(value))) return false;\n  return true;\n};","\"use strict\";\n\nvar isPrototype = require(\"../prototype/is\");\n\nmodule.exports = function (value) {\n  if (typeof value !== \"function\") return false;\n  if (!hasOwnProperty.call(value, \"length\")) return false;\n\n  try {\n    if (typeof value.length !== \"number\") return false;\n    if (typeof value.call !== \"function\") return false;\n    if (typeof value.apply !== \"function\") return false;\n  } catch (error) {\n    return false;\n  }\n\n  return !isPrototype(value);\n};","\"use strict\";\n\nvar isObject = require(\"../object/is\");\n\nmodule.exports = function (value) {\n  if (!isObject(value)) return false;\n\n  try {\n    if (!value.constructor) return false;\n    return value.constructor.prototype === value;\n  } catch (error) {\n    return false;\n  }\n};","\"use strict\";\n\nvar isValue = require(\"../value/is\"); // prettier-ignore\n\n\nvar possibleTypes = {\n  \"object\": true,\n  \"function\": true,\n  \"undefined\": true\n  /* document.all */\n\n};\n\nmodule.exports = function (value) {\n  if (!isValue(value)) return false;\n  return hasOwnProperty.call(possibleTypes, typeof value);\n};","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? String.prototype.contains : require(\"./shim\");","\"use strict\";\n\nvar str = \"razdwatrzy\";\n\nmodule.exports = function () {\n  if (typeof str.contains !== \"function\") return false;\n  return str.contains(\"dwa\") === true && str.contains(\"foo\") === false;\n};","\"use strict\";\n\nvar indexOf = String.prototype.indexOf;\n\nmodule.exports = function (searchString\n/*, position*/\n) {\n  return indexOf.call(this, searchString, arguments[1]) > -1;\n};","'use strict';\n\nvar d = require('d'),\n    callable = require('es5-ext/object/valid-callable'),\n    apply = Function.prototype.apply,\n    call = Function.prototype.call,\n    create = Object.create,\n    defineProperty = Object.defineProperty,\n    defineProperties = Object.defineProperties,\n    hasOwnProperty = Object.prototype.hasOwnProperty,\n    descriptor = {\n  configurable: true,\n  enumerable: false,\n  writable: true\n},\n    on,\n    _once2,\n    off,\n    emit,\n    methods,\n    descriptors,\n    base;\n\non = function on(type, listener) {\n  var data;\n  callable(listener);\n\n  if (!hasOwnProperty.call(this, '__ee__')) {\n    data = descriptor.value = create(null);\n    defineProperty(this, '__ee__', descriptor);\n    descriptor.value = null;\n  } else {\n    data = this.__ee__;\n  }\n\n  if (!data[type]) data[type] = listener;else if (typeof data[type] === 'object') data[type].push(listener);else data[type] = [data[type], listener];\n  return this;\n};\n\n_once2 = function once(type, listener) {\n  var _once, self;\n\n  callable(listener);\n  self = this;\n  on.call(this, type, _once = function once() {\n    off.call(self, type, _once);\n    apply.call(listener, this, arguments);\n  });\n  _once.__eeOnceListener__ = listener;\n  return this;\n};\n\noff = function off(type, listener) {\n  var data, listeners, candidate, i;\n  callable(listener);\n  if (!hasOwnProperty.call(this, '__ee__')) return this;\n  data = this.__ee__;\n  if (!data[type]) return this;\n  listeners = data[type];\n\n  if (typeof listeners === 'object') {\n    for (i = 0; candidate = listeners[i]; ++i) {\n      if (candidate === listener || candidate.__eeOnceListener__ === listener) {\n        if (listeners.length === 2) data[type] = listeners[i ? 0 : 1];else listeners.splice(i, 1);\n      }\n    }\n  } else {\n    if (listeners === listener || listeners.__eeOnceListener__ === listener) {\n      delete data[type];\n    }\n  }\n\n  return this;\n};\n\nemit = function emit(type) {\n  var i, l, listener, listeners, args;\n  if (!hasOwnProperty.call(this, '__ee__')) return;\n  listeners = this.__ee__[type];\n  if (!listeners) return;\n\n  if (typeof listeners === 'object') {\n    l = arguments.length;\n    args = new Array(l - 1);\n\n    for (i = 1; i < l; ++i) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners = listeners.slice();\n\n    for (i = 0; listener = listeners[i]; ++i) {\n      apply.call(listener, this, args);\n    }\n  } else {\n    switch (arguments.length) {\n      case 1:\n        call.call(listeners, this);\n        break;\n\n      case 2:\n        call.call(listeners, this, arguments[1]);\n        break;\n\n      case 3:\n        call.call(listeners, this, arguments[1], arguments[2]);\n        break;\n\n      default:\n        l = arguments.length;\n        args = new Array(l - 1);\n\n        for (i = 1; i < l; ++i) {\n          args[i - 1] = arguments[i];\n        }\n\n        apply.call(listeners, this, args);\n    }\n  }\n};\n\nmethods = {\n  on: on,\n  once: _once2,\n  off: off,\n  emit: emit\n};\ndescriptors = {\n  on: d(on),\n  once: d(_once2),\n  off: d(off),\n  emit: d(emit)\n};\nbase = defineProperties({}, descriptors);\n\nmodule.exports = exports = function exports(o) {\n  return o == null ? create(base) : defineProperties(Object(o), descriptors);\n};\n\nexports.methods = methods;","\"use strict\";\n\nvar toArray = require(\"es5-ext/array/to-array\"),\n    isValue = require(\"es5-ext/object/is-value\"),\n    callable = require(\"es5-ext/object/valid-callable\");\n\nvar slice = Array.prototype.slice,\n    resolveArgs;\n\nresolveArgs = function resolveArgs(args) {\n  return this.map(function (resolve, i) {\n    return resolve ? resolve(args[i]) : args[i];\n  }).concat(slice.call(args, this.length));\n};\n\nmodule.exports = function (resolvers) {\n  resolvers = toArray(resolvers);\n  resolvers.forEach(function (resolve) {\n    if (isValue(resolve)) callable(resolve);\n  });\n  return resolveArgs.bind(resolvers);\n};","\"use strict\";\n\nvar from = require(\"./from\"),\n    isArray = Array.isArray;\n\nmodule.exports = function (arrayLike) {\n  return isArray(arrayLike) ? arrayLike : from(arrayLike);\n};","\"use strict\";\n\nmodule.exports = function () {\n  var from = Array.from,\n      arr,\n      result;\n  if (typeof from !== \"function\") return false;\n  arr = [\"raz\", \"dwa\"];\n  result = from(arr);\n  return Boolean(result && result !== arr && result[1] === \"dwa\");\n};","\"use strict\";\n\nvar iteratorSymbol = require(\"es6-symbol\").iterator,\n    isArguments = require(\"../../function/is-arguments\"),\n    isFunction = require(\"../../function/is-function\"),\n    toPosInt = require(\"../../number/to-pos-integer\"),\n    callable = require(\"../../object/valid-callable\"),\n    validValue = require(\"../../object/valid-value\"),\n    isValue = require(\"../../object/is-value\"),\n    isString = require(\"../../string/is-string\"),\n    isArray = Array.isArray,\n    call = Function.prototype.call,\n    desc = {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  value: null\n},\n    defineProperty = Object.defineProperty; // eslint-disable-next-line complexity, max-lines-per-function\n\n\nmodule.exports = function (arrayLike\n/*, mapFn, thisArg*/\n) {\n  var mapFn = arguments[1],\n      thisArg = arguments[2],\n      Context,\n      i,\n      j,\n      arr,\n      length,\n      code,\n      iterator,\n      result,\n      getIterator,\n      value;\n  arrayLike = Object(validValue(arrayLike));\n  if (isValue(mapFn)) callable(mapFn);\n\n  if (!this || this === Array || !isFunction(this)) {\n    // Result: Plain array\n    if (!mapFn) {\n      if (isArguments(arrayLike)) {\n        // Source: Arguments\n        length = arrayLike.length;\n        if (length !== 1) return Array.apply(null, arrayLike);\n        arr = new Array(1);\n        arr[0] = arrayLike[0];\n        return arr;\n      }\n\n      if (isArray(arrayLike)) {\n        // Source: Array\n        arr = new Array(length = arrayLike.length);\n\n        for (i = 0; i < length; ++i) {\n          arr[i] = arrayLike[i];\n        }\n\n        return arr;\n      }\n    }\n\n    arr = [];\n  } else {\n    // Result: Non plain array\n    Context = this;\n  }\n\n  if (!isArray(arrayLike)) {\n    if ((getIterator = arrayLike[iteratorSymbol]) !== undefined) {\n      // Source: Iterator\n      iterator = callable(getIterator).call(arrayLike);\n      if (Context) arr = new Context();\n      result = iterator.next();\n      i = 0;\n\n      while (!result.done) {\n        value = mapFn ? call.call(mapFn, thisArg, result.value, i) : result.value;\n\n        if (Context) {\n          desc.value = value;\n          defineProperty(arr, i, desc);\n        } else {\n          arr[i] = value;\n        }\n\n        result = iterator.next();\n        ++i;\n      }\n\n      length = i;\n    } else if (isString(arrayLike)) {\n      // Source: String\n      length = arrayLike.length;\n      if (Context) arr = new Context();\n\n      for (i = 0, j = 0; i < length; ++i) {\n        value = arrayLike[i];\n\n        if (i + 1 < length) {\n          code = value.charCodeAt(0); // eslint-disable-next-line max-depth\n\n          if (code >= 0xd800 && code <= 0xdbff) value += arrayLike[++i];\n        }\n\n        value = mapFn ? call.call(mapFn, thisArg, value, j) : value;\n\n        if (Context) {\n          desc.value = value;\n          defineProperty(arr, j, desc);\n        } else {\n          arr[j] = value;\n        }\n\n        ++j;\n      }\n\n      length = j;\n    }\n  }\n\n  if (length === undefined) {\n    // Source: array or array-like\n    length = toPosInt(arrayLike.length);\n    if (Context) arr = new Context(length);\n\n    for (i = 0; i < length; ++i) {\n      value = mapFn ? call.call(mapFn, thisArg, arrayLike[i], i) : arrayLike[i];\n\n      if (Context) {\n        desc.value = value;\n        defineProperty(arr, i, desc);\n      } else {\n        arr[i] = value;\n      }\n    }\n  }\n\n  if (Context) {\n    desc.value = null;\n    arr.length = length;\n  }\n\n  return arr;\n};","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? require(\"ext/global-this\").Symbol : require(\"./polyfill\");","\"use strict\";\n\nvar global = require(\"ext/global-this\"),\n    validTypes = {\n  object: true,\n  symbol: true\n};\n\nmodule.exports = function () {\n  var Symbol = global.Symbol;\n  var symbol;\n  if (typeof Symbol !== \"function\") return false;\n  symbol = Symbol(\"test symbol\");\n\n  try {\n    String(symbol);\n  } catch (e) {\n    return false;\n  } // Return 'true' also for polyfills\n\n\n  if (!validTypes[typeof Symbol.iterator]) return false;\n  if (!validTypes[typeof Symbol.toPrimitive]) return false;\n  if (!validTypes[typeof Symbol.toStringTag]) return false;\n  return true;\n};","\"use strict\";\n\nmodule.exports = function () {\n  if (typeof globalThis !== \"object\") return false;\n  if (!globalThis) return false;\n  return globalThis.Array === Array;\n};","var naiveFallback = function naiveFallback() {\n  if (typeof self === \"object\" && self) return self;\n  if (typeof window === \"object\" && window) return window;\n  throw new Error(\"Unable to resolve global `this`\");\n};\n\nmodule.exports = function () {\n  if (this) return this; // Unexpected strict mode (may happen if e.g. bundled into ESM module)\n  // Thanks @mathiasbynens -> https://mathiasbynens.be/notes/globalthis\n  // In all ES5+ engines global object inherits from Object.prototype\n  // (if you approached one that doesn't please report)\n\n  try {\n    Object.defineProperty(Object.prototype, \"__global__\", {\n      get: function get() {\n        return this;\n      },\n      configurable: true\n    });\n  } catch (error) {\n    // Unfortunate case of Object.prototype being sealed (via preventExtensions, seal or freeze)\n    return naiveFallback();\n  }\n\n  try {\n    // Safari case (window.__global__ is resolved with global context, but __global__ does not)\n    if (!__global__) return naiveFallback();\n    return __global__;\n  } finally {\n    delete Object.prototype.__global__;\n  }\n}();","// ES2015 Symbol polyfill for environments that do not (or partially) support it\n\"use strict\";\n\nvar d = require(\"d\"),\n    validateSymbol = require(\"./validate-symbol\"),\n    NativeSymbol = require(\"ext/global-this\").Symbol,\n    generateName = require(\"./lib/private/generate-name\"),\n    setupStandardSymbols = require(\"./lib/private/setup/standard-symbols\"),\n    setupSymbolRegistry = require(\"./lib/private/setup/symbol-registry\");\n\nvar create = Object.create,\n    defineProperties = Object.defineProperties,\n    defineProperty = Object.defineProperty;\nvar SymbolPolyfill, HiddenSymbol, isNativeSafe;\n\nif (typeof NativeSymbol === \"function\") {\n  try {\n    String(NativeSymbol());\n    isNativeSafe = true;\n  } catch (ignore) {}\n} else {\n  NativeSymbol = null;\n} // Internal constructor (not one exposed) for creating Symbol instances.\n// This one is used to ensure that `someSymbol instanceof Symbol` always return false\n\n\nHiddenSymbol = function Symbol(description) {\n  if (this instanceof HiddenSymbol) throw new TypeError(\"Symbol is not a constructor\");\n  return SymbolPolyfill(description);\n}; // Exposed `Symbol` constructor\n// (returns instances of HiddenSymbol)\n\n\nmodule.exports = SymbolPolyfill = function Symbol(description) {\n  var symbol;\n  if (this instanceof Symbol) throw new TypeError(\"Symbol is not a constructor\");\n  if (isNativeSafe) return NativeSymbol(description);\n  symbol = create(HiddenSymbol.prototype);\n  description = description === undefined ? \"\" : String(description);\n  return defineProperties(symbol, {\n    __description__: d(\"\", description),\n    __name__: d(\"\", generateName(description))\n  });\n};\n\nsetupStandardSymbols(SymbolPolyfill);\nsetupSymbolRegistry(SymbolPolyfill); // Internal tweaks for real symbol producer\n\ndefineProperties(HiddenSymbol.prototype, {\n  constructor: d(SymbolPolyfill),\n  toString: d(\"\", function () {\n    return this.__name__;\n  })\n}); // Proper implementation of methods exposed on Symbol.prototype\n// They won't be accessible on produced symbol instances as they derive from HiddenSymbol.prototype\n\ndefineProperties(SymbolPolyfill.prototype, {\n  toString: d(function () {\n    return \"Symbol (\" + validateSymbol(this).__description__ + \")\";\n  }),\n  valueOf: d(function () {\n    return validateSymbol(this);\n  })\n});\ndefineProperty(SymbolPolyfill.prototype, SymbolPolyfill.toPrimitive, d(\"\", function () {\n  var symbol = validateSymbol(this);\n  if (typeof symbol === \"symbol\") return symbol;\n  return symbol.toString();\n}));\ndefineProperty(SymbolPolyfill.prototype, SymbolPolyfill.toStringTag, d(\"c\", \"Symbol\")); // Proper implementaton of toPrimitive and toStringTag for returned symbol instances\n\ndefineProperty(HiddenSymbol.prototype, SymbolPolyfill.toStringTag, d(\"c\", SymbolPolyfill.prototype[SymbolPolyfill.toStringTag])); // Note: It's important to define `toPrimitive` as last one, as some implementations\n// implement `toPrimitive` natively without implementing `toStringTag` (or other specified symbols)\n// And that may invoke error in definition flow:\n// See: https://github.com/medikoo/es6-symbol/issues/13#issuecomment-164146149\n\ndefineProperty(HiddenSymbol.prototype, SymbolPolyfill.toPrimitive, d(\"c\", SymbolPolyfill.prototype[SymbolPolyfill.toPrimitive]));","\"use strict\";\n\nmodule.exports = function (value) {\n  if (!value) return false;\n  if (typeof value === \"symbol\") return true;\n  if (!value.constructor) return false;\n  if (value.constructor.name !== \"Symbol\") return false;\n  return value[value.constructor.toStringTag] === \"Symbol\";\n};","\"use strict\";\n\nvar d = require(\"d\");\n\nvar create = Object.create,\n    defineProperty = Object.defineProperty,\n    objPrototype = Object.prototype;\nvar created = create(null);\n\nmodule.exports = function (desc) {\n  var postfix = 0,\n      name,\n      ie11BugWorkaround;\n\n  while (created[desc + (postfix || \"\")]) {\n    ++postfix;\n  }\n\n  desc += postfix || \"\";\n  created[desc] = true;\n  name = \"@@\" + desc;\n  defineProperty(objPrototype, name, d.gs(null, function (value) {\n    // For IE11 issue see:\n    // https://connect.microsoft.com/IE/feedbackdetail/view/1928508/\n    //    ie11-broken-getters-on-dom-objects\n    // https://github.com/medikoo/es6-symbol/issues/12\n    if (ie11BugWorkaround) return;\n    ie11BugWorkaround = true;\n    defineProperty(this, name, d(value));\n    ie11BugWorkaround = false;\n  }));\n  return name;\n};","\"use strict\";\n\nvar d = require(\"d\"),\n    NativeSymbol = require(\"ext/global-this\").Symbol;\n\nmodule.exports = function (SymbolPolyfill) {\n  return Object.defineProperties(SymbolPolyfill, {\n    // To ensure proper interoperability with other native functions (e.g. Array.from)\n    // fallback to eventual native implementation of given symbol\n    hasInstance: d(\"\", NativeSymbol && NativeSymbol.hasInstance || SymbolPolyfill(\"hasInstance\")),\n    isConcatSpreadable: d(\"\", NativeSymbol && NativeSymbol.isConcatSpreadable || SymbolPolyfill(\"isConcatSpreadable\")),\n    iterator: d(\"\", NativeSymbol && NativeSymbol.iterator || SymbolPolyfill(\"iterator\")),\n    match: d(\"\", NativeSymbol && NativeSymbol.match || SymbolPolyfill(\"match\")),\n    replace: d(\"\", NativeSymbol && NativeSymbol.replace || SymbolPolyfill(\"replace\")),\n    search: d(\"\", NativeSymbol && NativeSymbol.search || SymbolPolyfill(\"search\")),\n    species: d(\"\", NativeSymbol && NativeSymbol.species || SymbolPolyfill(\"species\")),\n    split: d(\"\", NativeSymbol && NativeSymbol.split || SymbolPolyfill(\"split\")),\n    toPrimitive: d(\"\", NativeSymbol && NativeSymbol.toPrimitive || SymbolPolyfill(\"toPrimitive\")),\n    toStringTag: d(\"\", NativeSymbol && NativeSymbol.toStringTag || SymbolPolyfill(\"toStringTag\")),\n    unscopables: d(\"\", NativeSymbol && NativeSymbol.unscopables || SymbolPolyfill(\"unscopables\"))\n  });\n};","\"use strict\";\n\nvar d = require(\"d\"),\n    validateSymbol = require(\"../../../validate-symbol\");\n\nvar registry = Object.create(null);\n\nmodule.exports = function (SymbolPolyfill) {\n  return Object.defineProperties(SymbolPolyfill, {\n    for: d(function (key) {\n      if (registry[key]) return registry[key];\n      return registry[key] = SymbolPolyfill(String(key));\n    }),\n    keyFor: d(function (symbol) {\n      var key;\n      validateSymbol(symbol);\n\n      for (key in registry) {\n        if (registry[key] === symbol) return key;\n      }\n\n      return undefined;\n    })\n  });\n};","\"use strict\";\n\nvar objToString = Object.prototype.toString,\n    id = objToString.call(function () {\n  return arguments;\n}());\n\nmodule.exports = function (value) {\n  return objToString.call(value) === id;\n};","\"use strict\";\n\nvar objToString = Object.prototype.toString,\n    isFunctionStringTag = RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);\n\nmodule.exports = function (value) {\n  return typeof value === \"function\" && isFunctionStringTag(objToString.call(value));\n};","\"use strict\";\n\nvar objToString = Object.prototype.toString,\n    id = objToString.call(\"\");\n\nmodule.exports = function (value) {\n  return typeof value === \"string\" || value && typeof value === \"object\" && (value instanceof String || objToString.call(value) === id) || false;\n};","\"use strict\";\n\nvar callable = require(\"es5-ext/object/valid-callable\");\n\nmodule.exports = function (userNormalizer) {\n  var normalizer;\n  if (typeof userNormalizer === \"function\") return {\n    set: userNormalizer,\n    get: userNormalizer\n  };\n  normalizer = {\n    get: callable(userNormalizer.get)\n  };\n\n  if (userNormalizer.set !== undefined) {\n    normalizer.set = callable(userNormalizer.set);\n    if (userNormalizer.delete) normalizer.delete = callable(userNormalizer.delete);\n    if (userNormalizer.clear) normalizer.clear = callable(userNormalizer.clear);\n    return normalizer;\n  }\n\n  normalizer.set = normalizer.get;\n  return normalizer;\n};","\"use strict\";\n\nmodule.exports = function (args) {\n  var id,\n      i,\n      length = args.length;\n  if (!length) return \"\\x02\";\n  id = String(args[i = 0]);\n\n  while (--length) {\n    id += \"\\x01\" + args[++i];\n  }\n\n  return id;\n};","\"use strict\";\n\nmodule.exports = function (length) {\n  if (!length) {\n    return function () {\n      return \"\";\n    };\n  }\n\n  return function (args) {\n    var id = String(args[0]),\n        i = 0,\n        currentLength = length;\n\n    while (--currentLength) {\n      id += \"\\x01\" + args[++i];\n    }\n\n    return id;\n  };\n};","/* eslint max-statements: 0 */\n\"use strict\";\n\nvar indexOf = require(\"es5-ext/array/#/e-index-of\");\n\nvar create = Object.create;\n\nmodule.exports = function () {\n  var lastId = 0,\n      map = [],\n      cache = create(null);\n  return {\n    get: function get(args) {\n      var index = 0,\n          set = map,\n          i,\n          length = args.length;\n      if (length === 0) return set[length] || null;\n\n      if (set = set[length]) {\n        while (index < length - 1) {\n          i = indexOf.call(set[0], args[index]);\n          if (i === -1) return null;\n          set = set[1][i];\n          ++index;\n        }\n\n        i = indexOf.call(set[0], args[index]);\n        if (i === -1) return null;\n        return set[1][i] || null;\n      }\n\n      return null;\n    },\n    set: function set(args) {\n      var index = 0,\n          set = map,\n          i,\n          length = args.length;\n\n      if (length === 0) {\n        set[length] = ++lastId;\n      } else {\n        if (!set[length]) {\n          set[length] = [[], []];\n        }\n\n        set = set[length];\n\n        while (index < length - 1) {\n          i = indexOf.call(set[0], args[index]);\n\n          if (i === -1) {\n            i = set[0].push(args[index]) - 1;\n            set[1].push([[], []]);\n          }\n\n          set = set[1][i];\n          ++index;\n        }\n\n        i = indexOf.call(set[0], args[index]);\n\n        if (i === -1) {\n          i = set[0].push(args[index]) - 1;\n        }\n\n        set[1][i] = ++lastId;\n      }\n\n      cache[lastId] = args;\n      return lastId;\n    },\n    delete: function _delete(id) {\n      var index = 0,\n          set = map,\n          i,\n          args = cache[id],\n          length = args.length,\n          path = [];\n\n      if (length === 0) {\n        delete set[length];\n      } else if (set = set[length]) {\n        while (index < length - 1) {\n          i = indexOf.call(set[0], args[index]);\n\n          if (i === -1) {\n            return;\n          }\n\n          path.push(set, i);\n          set = set[1][i];\n          ++index;\n        }\n\n        i = indexOf.call(set[0], args[index]);\n\n        if (i === -1) {\n          return;\n        }\n\n        id = set[1][i];\n        set[0].splice(i, 1);\n        set[1].splice(i, 1);\n\n        while (!set[0].length && path.length) {\n          i = path.pop();\n          set = path.pop();\n          set[0].splice(i, 1);\n          set[1].splice(i, 1);\n        }\n      }\n\n      delete cache[id];\n    },\n    clear: function clear() {\n      map = [];\n      cache = create(null);\n    }\n  };\n};","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Number.isNaN : require(\"./shim\");","\"use strict\";\n\nmodule.exports = function () {\n  var numberIsNaN = Number.isNaN;\n  if (typeof numberIsNaN !== \"function\") return false;\n  return !numberIsNaN({}) && numberIsNaN(NaN) && !numberIsNaN(34);\n};","\"use strict\";\n\nmodule.exports = function (value) {\n  // eslint-disable-next-line no-self-compare\n  return value !== value;\n};","\"use strict\";\n\nvar indexOf = require(\"es5-ext/array/#/e-index-of\");\n\nmodule.exports = function () {\n  var lastId = 0,\n      argsMap = [],\n      cache = [];\n  return {\n    get: function get(args) {\n      var index = indexOf.call(argsMap, args[0]);\n      return index === -1 ? null : cache[index];\n    },\n    set: function set(args) {\n      argsMap.push(args[0]);\n      cache.push(++lastId);\n      return lastId;\n    },\n    delete: function _delete(id) {\n      var index = indexOf.call(cache, id);\n\n      if (index !== -1) {\n        argsMap.splice(index, 1);\n        cache.splice(index, 1);\n      }\n    },\n    clear: function clear() {\n      argsMap = [];\n      cache = [];\n    }\n  };\n};","\"use strict\";\n\nvar indexOf = require(\"es5-ext/array/#/e-index-of\"),\n    create = Object.create;\n\nmodule.exports = function (length) {\n  var lastId = 0,\n      map = [[], []],\n      cache = create(null);\n  return {\n    get: function get(args) {\n      var index = 0,\n          set = map,\n          i;\n\n      while (index < length - 1) {\n        i = indexOf.call(set[0], args[index]);\n        if (i === -1) return null;\n        set = set[1][i];\n        ++index;\n      }\n\n      i = indexOf.call(set[0], args[index]);\n      if (i === -1) return null;\n      return set[1][i] || null;\n    },\n    set: function set(args) {\n      var index = 0,\n          set = map,\n          i;\n\n      while (index < length - 1) {\n        i = indexOf.call(set[0], args[index]);\n\n        if (i === -1) {\n          i = set[0].push(args[index]) - 1;\n          set[1].push([[], []]);\n        }\n\n        set = set[1][i];\n        ++index;\n      }\n\n      i = indexOf.call(set[0], args[index]);\n\n      if (i === -1) {\n        i = set[0].push(args[index]) - 1;\n      }\n\n      set[1][i] = ++lastId;\n      cache[lastId] = args;\n      return lastId;\n    },\n    delete: function _delete(id) {\n      var index = 0,\n          set = map,\n          i,\n          path = [],\n          args = cache[id];\n\n      while (index < length - 1) {\n        i = indexOf.call(set[0], args[index]);\n\n        if (i === -1) {\n          return;\n        }\n\n        path.push(set, i);\n        set = set[1][i];\n        ++index;\n      }\n\n      i = indexOf.call(set[0], args[index]);\n\n      if (i === -1) {\n        return;\n      }\n\n      id = set[1][i];\n      set[0].splice(i, 1);\n      set[1].splice(i, 1);\n\n      while (!set[0].length && path.length) {\n        i = path.pop();\n        set = path.pop();\n        set[0].splice(i, 1);\n        set[1].splice(i, 1);\n      }\n\n      delete cache[id];\n    },\n    clear: function clear() {\n      map = [[], []];\n      cache = create(null);\n    }\n  };\n};","/* eslint consistent-this: 0, no-shadow:0, no-eq-null: 0, eqeqeq: 0, no-unused-vars: 0 */\n// Support for asynchronous functions\n\"use strict\";\n\nvar aFrom = require(\"es5-ext/array/from\"),\n    objectMap = require(\"es5-ext/object/map\"),\n    mixin = require(\"es5-ext/object/mixin\"),\n    defineLength = require(\"es5-ext/function/_define-length\"),\n    nextTick = require(\"next-tick\");\n\nvar slice = Array.prototype.slice,\n    apply = Function.prototype.apply,\n    create = Object.create;\n\nrequire(\"../lib/registered-extensions\").async = function (tbi, conf) {\n  var waiting = create(null),\n      cache = create(null),\n      base = conf.memoized,\n      original = conf.original,\n      currentCallback,\n      currentContext,\n      currentArgs; // Initial\n\n  conf.memoized = defineLength(function (arg) {\n    var args = arguments,\n        last = args[args.length - 1];\n\n    if (typeof last === \"function\") {\n      currentCallback = last;\n      args = slice.call(args, 0, -1);\n    }\n\n    return base.apply(currentContext = this, currentArgs = args);\n  }, base);\n\n  try {\n    mixin(conf.memoized, base);\n  } catch (ignore) {} // From cache (sync)\n\n\n  conf.on(\"get\", function (id) {\n    var cb, context, args;\n    if (!currentCallback) return; // Unresolved\n\n    if (waiting[id]) {\n      if (typeof waiting[id] === \"function\") waiting[id] = [waiting[id], currentCallback];else waiting[id].push(currentCallback);\n      currentCallback = null;\n      return;\n    } // Resolved, assure next tick invocation\n\n\n    cb = currentCallback;\n    context = currentContext;\n    args = currentArgs;\n    currentCallback = currentContext = currentArgs = null;\n    nextTick(function () {\n      var data;\n\n      if (hasOwnProperty.call(cache, id)) {\n        data = cache[id];\n        conf.emit(\"getasync\", id, args, context);\n        apply.call(cb, data.context, data.args);\n      } else {\n        // Purged in a meantime, we shouldn't rely on cached value, recall\n        currentCallback = cb;\n        currentContext = context;\n        currentArgs = args;\n        base.apply(context, args);\n      }\n    });\n  }); // Not from cache\n\n  conf.original = function () {\n    var args, cb, origCb, result;\n    if (!currentCallback) return apply.call(original, this, arguments);\n    args = aFrom(arguments);\n\n    cb = function self(err) {\n      var cb,\n          args,\n          id = self.id;\n\n      if (id == null) {\n        // Shouldn't happen, means async callback was called sync way\n        nextTick(apply.bind(self, this, arguments));\n        return undefined;\n      }\n\n      delete self.id;\n      cb = waiting[id];\n      delete waiting[id];\n\n      if (!cb) {\n        // Already processed,\n        // outcome of race condition: asyncFn(1, cb), asyncFn.clear(), asyncFn(1, cb)\n        return undefined;\n      }\n\n      args = aFrom(arguments);\n\n      if (conf.has(id)) {\n        if (err) {\n          conf.delete(id);\n        } else {\n          cache[id] = {\n            context: this,\n            args: args\n          };\n          conf.emit(\"setasync\", id, typeof cb === \"function\" ? 1 : cb.length);\n        }\n      }\n\n      if (typeof cb === \"function\") {\n        result = apply.call(cb, this, args);\n      } else {\n        cb.forEach(function (cb) {\n          result = apply.call(cb, this, args);\n        }, this);\n      }\n\n      return result;\n    };\n\n    origCb = currentCallback;\n    currentCallback = currentContext = currentArgs = null;\n    args.push(cb);\n    result = apply.call(original, this, args);\n    cb.cb = origCb;\n    currentCallback = cb;\n    return result;\n  }; // After not from cache call\n\n\n  conf.on(\"set\", function (id) {\n    if (!currentCallback) {\n      conf.delete(id);\n      return;\n    }\n\n    if (waiting[id]) {\n      // Race condition: asyncFn(1, cb), asyncFn.clear(), asyncFn(1, cb)\n      if (typeof waiting[id] === \"function\") waiting[id] = [waiting[id], currentCallback.cb];else waiting[id].push(currentCallback.cb);\n    } else {\n      waiting[id] = currentCallback.cb;\n    }\n\n    delete currentCallback.cb;\n    currentCallback.id = id;\n    currentCallback = null;\n  }); // On delete\n\n  conf.on(\"delete\", function (id) {\n    var result; // If false, we don't have value yet, so we assume that intention is not\n    // to memoize this call. After value is obtained we don't cache it but\n    // gracefully pass to callback\n\n    if (hasOwnProperty.call(waiting, id)) return;\n    if (!cache[id]) return;\n    result = cache[id];\n    delete cache[id];\n    conf.emit(\"deleteasync\", id, slice.call(result.args, 1));\n  }); // On clear\n\n  conf.on(\"clear\", function () {\n    var oldCache = cache;\n    cache = create(null);\n    conf.emit(\"clearasync\", objectMap(oldCache, function (data) {\n      return slice.call(data.args, 1);\n    }));\n  });\n};","var scope = typeof global !== \"undefined\" && global || typeof self !== \"undefined\" && self || window;\nvar apply = Function.prototype.apply; // DOM APIs, for completeness\n\nexports.setTimeout = function () {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\n\nexports.setInterval = function () {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\n\nexports.clearTimeout = exports.clearInterval = function (timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\n\nTimeout.prototype.unref = Timeout.prototype.ref = function () {};\n\nTimeout.prototype.close = function () {\n  this._clearFn.call(scope, this._id);\n}; // Does not start the time, just sets up the members needed.\n\n\nexports.enroll = function (item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function (item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function (item) {\n  clearTimeout(item._idleTimeoutId);\n  var msecs = item._idleTimeout;\n\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout) item._onTimeout();\n    }, msecs);\n  }\n}; // setimmediate attaches itself to the global object\n\n\nrequire(\"setimmediate\"); // On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\n\n\nexports.setImmediate = typeof self !== \"undefined\" && self.setImmediate || typeof global !== \"undefined\" && global.setImmediate || this && this.setImmediate;\nexports.clearImmediate = typeof self !== \"undefined\" && self.clearImmediate || typeof global !== \"undefined\" && global.clearImmediate || this && this.clearImmediate;","(function (global, undefined) {\n  \"use strict\";\n\n  if (global.setImmediate) {\n    return;\n  }\n\n  var nextHandle = 1; // Spec says greater than zero\n\n  var tasksByHandle = {};\n  var currentlyRunningATask = false;\n  var doc = global.document;\n  var registerImmediate;\n\n  function setImmediate(callback) {\n    // Callback can either be a function or a string\n    if (typeof callback !== \"function\") {\n      callback = new Function(\"\" + callback);\n    } // Copy function arguments\n\n\n    var args = new Array(arguments.length - 1);\n\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i + 1];\n    } // Store and register the task\n\n\n    var task = {\n      callback: callback,\n      args: args\n    };\n    tasksByHandle[nextHandle] = task;\n    registerImmediate(nextHandle);\n    return nextHandle++;\n  }\n\n  function clearImmediate(handle) {\n    delete tasksByHandle[handle];\n  }\n\n  function run(task) {\n    var callback = task.callback;\n    var args = task.args;\n\n    switch (args.length) {\n      case 0:\n        callback();\n        break;\n\n      case 1:\n        callback(args[0]);\n        break;\n\n      case 2:\n        callback(args[0], args[1]);\n        break;\n\n      case 3:\n        callback(args[0], args[1], args[2]);\n        break;\n\n      default:\n        callback.apply(undefined, args);\n        break;\n    }\n  }\n\n  function runIfPresent(handle) {\n    // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n    // So if we're currently running a task, we'll need to delay this invocation.\n    if (currentlyRunningATask) {\n      // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n      // \"too much recursion\" error.\n      setTimeout(runIfPresent, 0, handle);\n    } else {\n      var task = tasksByHandle[handle];\n\n      if (task) {\n        currentlyRunningATask = true;\n\n        try {\n          run(task);\n        } finally {\n          clearImmediate(handle);\n          currentlyRunningATask = false;\n        }\n      }\n    }\n  }\n\n  function installNextTickImplementation() {\n    registerImmediate = function registerImmediate(handle) {\n      process.nextTick(function () {\n        runIfPresent(handle);\n      });\n    };\n  }\n\n  function canUsePostMessage() {\n    // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n    // where `global.postMessage` means something completely different and can't be used for this purpose.\n    if (global.postMessage && !global.importScripts) {\n      var postMessageIsAsynchronous = true;\n      var oldOnMessage = global.onmessage;\n\n      global.onmessage = function () {\n        postMessageIsAsynchronous = false;\n      };\n\n      global.postMessage(\"\", \"*\");\n      global.onmessage = oldOnMessage;\n      return postMessageIsAsynchronous;\n    }\n  }\n\n  function installPostMessageImplementation() {\n    // Installs an event handler on `global` for the `message` event: see\n    // * https://developer.mozilla.org/en/DOM/window.postMessage\n    // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n    var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n\n    var onGlobalMessage = function onGlobalMessage(event) {\n      if (event.source === global && typeof event.data === \"string\" && event.data.indexOf(messagePrefix) === 0) {\n        runIfPresent(+event.data.slice(messagePrefix.length));\n      }\n    };\n\n    if (global.addEventListener) {\n      global.addEventListener(\"message\", onGlobalMessage, false);\n    } else {\n      global.attachEvent(\"onmessage\", onGlobalMessage);\n    }\n\n    registerImmediate = function registerImmediate(handle) {\n      global.postMessage(messagePrefix + handle, \"*\");\n    };\n  }\n\n  function installMessageChannelImplementation() {\n    var channel = new MessageChannel();\n\n    channel.port1.onmessage = function (event) {\n      var handle = event.data;\n      runIfPresent(handle);\n    };\n\n    registerImmediate = function registerImmediate(handle) {\n      channel.port2.postMessage(handle);\n    };\n  }\n\n  function installReadyStateChangeImplementation() {\n    var html = doc.documentElement;\n\n    registerImmediate = function registerImmediate(handle) {\n      // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n      // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n      var script = doc.createElement(\"script\");\n\n      script.onreadystatechange = function () {\n        runIfPresent(handle);\n        script.onreadystatechange = null;\n        html.removeChild(script);\n        script = null;\n      };\n\n      html.appendChild(script);\n    };\n  }\n\n  function installSetTimeoutImplementation() {\n    registerImmediate = function registerImmediate(handle) {\n      setTimeout(runIfPresent, 0, handle);\n    };\n  } // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n\n\n  var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n  attachTo = attachTo && attachTo.setTimeout ? attachTo : global; // Don't get fooled by e.g. browserify environments.\n\n  if ({}.toString.call(global.process) === \"[object process]\") {\n    // For Node.js before 0.9\n    installNextTickImplementation();\n  } else if (canUsePostMessage()) {\n    // For non-IE10 modern browsers\n    installPostMessageImplementation();\n  } else if (global.MessageChannel) {\n    // For web workers, where supported\n    installMessageChannelImplementation();\n  } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n    // For IE 68\n    installReadyStateChangeImplementation();\n  } else {\n    // For older browsers\n    installSetTimeoutImplementation();\n  }\n\n  attachTo.setImmediate = setImmediate;\n  attachTo.clearImmediate = clearImmediate;\n})(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self);","/* eslint max-statements: 0 */\n// Support for functions returning promise\n\"use strict\";\n\nvar objectMap = require(\"es5-ext/object/map\"),\n    primitiveSet = require(\"es5-ext/object/primitive-set\"),\n    ensureString = require(\"es5-ext/object/validate-stringifiable-value\"),\n    toShortString = require(\"es5-ext/to-short-string-representation\"),\n    isPromise = require(\"is-promise\"),\n    nextTick = require(\"next-tick\");\n\nvar create = Object.create,\n    supportedModes = primitiveSet(\"then\", \"then:finally\", \"done\", \"done:finally\");\n\nrequire(\"../lib/registered-extensions\").promise = function (mode, conf) {\n  var waiting = create(null),\n      cache = create(null),\n      promises = create(null);\n\n  if (mode === true) {\n    mode = null;\n  } else {\n    mode = ensureString(mode);\n\n    if (!supportedModes[mode]) {\n      throw new TypeError(\"'\" + toShortString(mode) + \"' is not valid promise mode\");\n    }\n  } // After not from cache call\n\n\n  conf.on(\"set\", function (id, ignore, promise) {\n    var isFailed = false;\n\n    if (!isPromise(promise)) {\n      // Non promise result\n      cache[id] = promise;\n      conf.emit(\"setasync\", id, 1);\n      return;\n    }\n\n    waiting[id] = 1;\n    promises[id] = promise;\n\n    var onSuccess = function onSuccess(result) {\n      var count = waiting[id];\n\n      if (isFailed) {\n        throw new Error(\"Memoizee error: Detected unordered then|done & finally resolution, which \" + \"in turn makes proper detection of success/failure impossible (when in \" + \"'done:finally' mode)\\n\" + \"Consider to rely on 'then' or 'done' mode instead.\");\n      }\n\n      if (!count) return; // Deleted from cache before resolved\n\n      delete waiting[id];\n      cache[id] = result;\n      conf.emit(\"setasync\", id, count);\n    };\n\n    var onFailure = function onFailure() {\n      isFailed = true;\n      if (!waiting[id]) return; // Deleted from cache (or succeed in case of finally)\n\n      delete waiting[id];\n      delete promises[id];\n      conf.delete(id);\n    };\n\n    var resolvedMode = mode;\n    if (!resolvedMode) resolvedMode = \"then\";\n\n    if (resolvedMode === \"then\") {\n      var nextTickFailure = function nextTickFailure() {\n        nextTick(onFailure);\n      }; // Eventual finally needs to be attached to non rejected promise\n      // (so we not force propagation of unhandled rejection)\n\n\n      promise = promise.then(function (result) {\n        nextTick(onSuccess.bind(this, result));\n      }, nextTickFailure); // If `finally` is a function we attach to it to remove cancelled promises.\n\n      if (typeof promise.finally === \"function\") {\n        promise.finally(nextTickFailure);\n      }\n    } else if (resolvedMode === \"done\") {\n      // Not recommended, as it may mute any eventual \"Unhandled error\" events\n      if (typeof promise.done !== \"function\") {\n        throw new Error(\"Memoizee error: Retrieved promise does not implement 'done' \" + \"in 'done' mode\");\n      }\n\n      promise.done(onSuccess, onFailure);\n    } else if (resolvedMode === \"done:finally\") {\n      // The only mode with no side effects assuming library does not throw unconditionally\n      // for rejected promises.\n      if (typeof promise.done !== \"function\") {\n        throw new Error(\"Memoizee error: Retrieved promise does not implement 'done' \" + \"in 'done:finally' mode\");\n      }\n\n      if (typeof promise.finally !== \"function\") {\n        throw new Error(\"Memoizee error: Retrieved promise does not implement 'finally' \" + \"in 'done:finally' mode\");\n      }\n\n      promise.done(onSuccess);\n      promise.finally(onFailure);\n    }\n  }); // From cache (sync)\n\n  conf.on(\"get\", function (id, args, context) {\n    var promise;\n\n    if (waiting[id]) {\n      ++waiting[id]; // Still waiting\n\n      return;\n    }\n\n    promise = promises[id];\n\n    var emit = function emit() {\n      conf.emit(\"getasync\", id, args, context);\n    };\n\n    if (isPromise(promise)) {\n      if (typeof promise.done === \"function\") promise.done(emit);else {\n        promise.then(function () {\n          nextTick(emit);\n        });\n      }\n    } else {\n      emit();\n    }\n  }); // On delete\n\n  conf.on(\"delete\", function (id) {\n    delete promises[id];\n\n    if (waiting[id]) {\n      delete waiting[id];\n      return; // Not yet resolved\n    }\n\n    if (!hasOwnProperty.call(cache, id)) return;\n    var result = cache[id];\n    delete cache[id];\n    conf.emit(\"deleteasync\", id, [result]);\n  }); // On clear\n\n  conf.on(\"clear\", function () {\n    var oldCache = cache;\n    cache = create(null);\n    waiting = create(null);\n    promises = create(null);\n    conf.emit(\"clearasync\", objectMap(oldCache, function (data) {\n      return [data];\n    }));\n  });\n};","\"use strict\";\n\nvar forEach = Array.prototype.forEach,\n    create = Object.create; // eslint-disable-next-line no-unused-vars\n\nmodule.exports = function (arg\n/*, args*/\n) {\n  var set = create(null);\n  forEach.call(arguments, function (name) {\n    set[name] = true;\n  });\n  return set;\n};","\"use strict\";\n\nvar ensureValue = require(\"./valid-value\"),\n    stringifiable = require(\"./validate-stringifiable\");\n\nmodule.exports = function (value) {\n  return stringifiable(ensureValue(value));\n};","\"use strict\";\n\nvar isCallable = require(\"./is-callable\");\n\nmodule.exports = function (stringifiable) {\n  try {\n    if (stringifiable && isCallable(stringifiable.toString)) return stringifiable.toString();\n    return String(stringifiable);\n  } catch (e) {\n    throw new TypeError(\"Passed argument cannot be stringifed\");\n  }\n};","\"use strict\";\n\nvar safeToString = require(\"./safe-to-string\");\n\nvar reNewLine = /[\\n\\r\\u2028\\u2029]/g;\n\nmodule.exports = function (value) {\n  var string = safeToString(value); // Trim if too long\n\n  if (string.length > 100) string = string.slice(0, 99) + \"\"; // Replace eventual new lines\n\n  string = string.replace(reNewLine, function (char) {\n    return JSON.stringify(char).slice(1, -1);\n  });\n  return string;\n};","\"use strict\";\n\nvar isCallable = require(\"./object/is-callable\");\n\nmodule.exports = function (value) {\n  try {\n    if (value && isCallable(value.toString)) return value.toString();\n    return String(value);\n  } catch (e) {\n    return \"<Non-coercible to string value>\";\n  }\n};","// Call dispose callback on each cache purge\n\"use strict\";\n\nvar callable = require(\"es5-ext/object/valid-callable\"),\n    forEach = require(\"es5-ext/object/for-each\"),\n    extensions = require(\"../lib/registered-extensions\"),\n    apply = Function.prototype.apply;\n\nextensions.dispose = function (dispose, conf, options) {\n  var del;\n  callable(dispose);\n\n  if (options.async && extensions.async || options.promise && extensions.promise) {\n    conf.on(\"deleteasync\", del = function del(id, resultArray) {\n      apply.call(dispose, null, resultArray);\n    });\n    conf.on(\"clearasync\", function (cache) {\n      forEach(cache, function (result, id) {\n        del(id, result);\n      });\n    });\n    return;\n  }\n\n  conf.on(\"delete\", del = function del(id, result) {\n    dispose(result);\n  });\n  conf.on(\"clear\", function (cache) {\n    forEach(cache, function (result, id) {\n      del(id, result);\n    });\n  });\n};","/* eslint consistent-this: 0 */\n// Timeout cached values\n\"use strict\";\n\nvar aFrom = require(\"es5-ext/array/from\"),\n    forEach = require(\"es5-ext/object/for-each\"),\n    nextTick = require(\"next-tick\"),\n    isPromise = require(\"is-promise\"),\n    timeout = require(\"timers-ext/valid-timeout\"),\n    extensions = require(\"../lib/registered-extensions\");\n\nvar noop = Function.prototype,\n    max = Math.max,\n    min = Math.min,\n    create = Object.create;\n\nextensions.maxAge = function (maxAge, conf, options) {\n  var timeouts, postfix, preFetchAge, preFetchTimeouts;\n  maxAge = timeout(maxAge);\n  if (!maxAge) return;\n  timeouts = create(null);\n  postfix = options.async && extensions.async || options.promise && extensions.promise ? \"async\" : \"\";\n  conf.on(\"set\" + postfix, function (id) {\n    timeouts[id] = setTimeout(function () {\n      conf.delete(id);\n    }, maxAge);\n    if (typeof timeouts[id].unref === \"function\") timeouts[id].unref();\n    if (!preFetchTimeouts) return;\n\n    if (preFetchTimeouts[id]) {\n      if (preFetchTimeouts[id] !== \"nextTick\") clearTimeout(preFetchTimeouts[id]);\n    }\n\n    preFetchTimeouts[id] = setTimeout(function () {\n      delete preFetchTimeouts[id];\n    }, preFetchAge);\n    if (typeof preFetchTimeouts[id].unref === \"function\") preFetchTimeouts[id].unref();\n  });\n  conf.on(\"delete\" + postfix, function (id) {\n    clearTimeout(timeouts[id]);\n    delete timeouts[id];\n    if (!preFetchTimeouts) return;\n    if (preFetchTimeouts[id] !== \"nextTick\") clearTimeout(preFetchTimeouts[id]);\n    delete preFetchTimeouts[id];\n  });\n\n  if (options.preFetch) {\n    if (options.preFetch === true || isNaN(options.preFetch)) {\n      preFetchAge = 0.333;\n    } else {\n      preFetchAge = max(min(Number(options.preFetch), 1), 0);\n    }\n\n    if (preFetchAge) {\n      preFetchTimeouts = {};\n      preFetchAge = (1 - preFetchAge) * maxAge;\n      conf.on(\"get\" + postfix, function (id, args, context) {\n        if (!preFetchTimeouts[id]) {\n          preFetchTimeouts[id] = \"nextTick\";\n          nextTick(function () {\n            var result;\n            if (preFetchTimeouts[id] !== \"nextTick\") return;\n            delete preFetchTimeouts[id];\n            conf.delete(id);\n\n            if (options.async) {\n              args = aFrom(args);\n              args.push(noop);\n            }\n\n            result = conf.memoized.apply(context, args);\n\n            if (options.promise) {\n              // Supress eventual error warnings\n              if (isPromise(result)) {\n                if (typeof result.done === \"function\") result.done(noop, noop);else result.then(noop, noop);\n              }\n            }\n          });\n        }\n      });\n    }\n  }\n\n  conf.on(\"clear\" + postfix, function () {\n    forEach(timeouts, function (id) {\n      clearTimeout(id);\n    });\n    timeouts = {};\n\n    if (preFetchTimeouts) {\n      forEach(preFetchTimeouts, function (id) {\n        if (id !== \"nextTick\") clearTimeout(id);\n      });\n      preFetchTimeouts = {};\n    }\n  });\n};","\"use strict\";\n\nvar toPosInt = require(\"es5-ext/number/to-pos-integer\"),\n    maxTimeout = require(\"./max-timeout\");\n\nmodule.exports = function (value) {\n  value = toPosInt(value);\n  if (value > maxTimeout) throw new TypeError(value + \" exceeds maximum possible timeout\");\n  return value;\n};","\"use strict\";\n\nmodule.exports = 2147483647;","// Limit cache size, LRU (least recently used) algorithm.\n\"use strict\";\n\nvar toPosInteger = require(\"es5-ext/number/to-pos-integer\"),\n    lruQueue = require(\"lru-queue\"),\n    extensions = require(\"../lib/registered-extensions\");\n\nextensions.max = function (max, conf, options) {\n  var postfix, queue, hit;\n  max = toPosInteger(max);\n  if (!max) return;\n  queue = lruQueue(max);\n  postfix = options.async && extensions.async || options.promise && extensions.promise ? \"async\" : \"\";\n  conf.on(\"set\" + postfix, hit = function hit(id) {\n    id = queue.hit(id);\n    if (id === undefined) return;\n    conf.delete(id);\n  });\n  conf.on(\"get\" + postfix, hit);\n  conf.on(\"delete\" + postfix, queue.delete);\n  conf.on(\"clear\" + postfix, queue.clear);\n};","'use strict';\n\nvar toPosInt = require('es5-ext/number/to-pos-integer'),\n    create = Object.create,\n    hasOwnProperty = Object.prototype.hasOwnProperty;\n\nmodule.exports = function (limit) {\n  var size = 0,\n      base = 1,\n      queue = create(null),\n      map = create(null),\n      index = 0,\n      del;\n  limit = toPosInt(limit);\n  return {\n    hit: function hit(id) {\n      var oldIndex = map[id],\n          nuIndex = ++index;\n      queue[nuIndex] = id;\n      map[id] = nuIndex;\n\n      if (!oldIndex) {\n        ++size;\n        if (size <= limit) return;\n        id = queue[base];\n        del(id);\n        return id;\n      }\n\n      delete queue[oldIndex];\n      if (base !== oldIndex) return;\n\n      while (!hasOwnProperty.call(queue, ++base)) {\n        continue;\n      } //jslint: skip\n\n    },\n    delete: del = function del(id) {\n      var oldIndex = map[id];\n      if (!oldIndex) return;\n      delete queue[oldIndex];\n      delete map[id];\n      --size;\n      if (base !== oldIndex) return;\n\n      if (!size) {\n        index = 0;\n        base = 1;\n        return;\n      }\n\n      while (!hasOwnProperty.call(queue, ++base)) {\n        continue;\n      } //jslint: skip\n\n    },\n    clear: function clear() {\n      size = 0;\n      base = 1;\n      queue = create(null);\n      map = create(null);\n      index = 0;\n    }\n  };\n};","// Reference counter, useful for garbage collector like functionality\n\"use strict\";\n\nvar d = require(\"d\"),\n    extensions = require(\"../lib/registered-extensions\"),\n    create = Object.create,\n    defineProperties = Object.defineProperties;\n\nextensions.refCounter = function (ignore, conf, options) {\n  var cache, postfix;\n  cache = create(null);\n  postfix = options.async && extensions.async || options.promise && extensions.promise ? \"async\" : \"\";\n  conf.on(\"set\" + postfix, function (id, length) {\n    cache[id] = length || 1;\n  });\n  conf.on(\"get\" + postfix, function (id) {\n    ++cache[id];\n  });\n  conf.on(\"delete\" + postfix, function (id) {\n    delete cache[id];\n  });\n  conf.on(\"clear\" + postfix, function () {\n    cache = {};\n  });\n  defineProperties(conf.memoized, {\n    deleteRef: d(function () {\n      var id = conf.get(arguments);\n      if (id === null) return null;\n      if (!cache[id]) return null;\n\n      if (! --cache[id]) {\n        conf.delete(id);\n        return true;\n      }\n\n      return false;\n    }),\n    getRefCount: d(function () {\n      var id = conf.get(arguments);\n      if (id === null) return 0;\n      if (!cache[id]) return 0;\n      return cache[id];\n    })\n  });\n};","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","/*\n * Chess App using React and Web Workers\n * Copyright (C) 2019 mhonert (https://github.com/mhonert)\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport const BLACK = -1;\nexport const WHITE = 1;\n\nexport const BOARD_BORDER = 99;\nexport const EMPTY = 0;\n\nexport const __ = BOARD_BORDER;\n\n// Bit-Patterns for Board state\nexport const WHITE_KING_MOVED = 1 << 7;\nexport const BLACK_KING_MOVED = 1 << 8;\nexport const WHITE_LEFT_ROOK_MOVED = 1 << 9;\nexport const WHITE_RIGHT_ROOK_MOVED = 1 << 10;\nexport const BLACK_LEFT_ROOK_MOVED = 1 << 11;\nexport const BLACK_RIGHT_ROOK_MOVED = 1 << 12;\nexport const EN_PASSANT = [...Array(16).keys()].map(i => 1 << (i + 13));\n\nexport const getState = board => board[board.length - 1];\n\nexport const whiteKingMoved = board =>\n  (getState(board) & WHITE_KING_MOVED) !== 0;\nexport const blackKingMoved = board =>\n  (getState(board) & BLACK_KING_MOVED) !== 0;\nexport const whiteLeftRookMoved = board =>\n  (getState(board) & WHITE_LEFT_ROOK_MOVED) !== 0;\nexport const whiteRightRookMoved = board =>\n  (getState(board) & WHITE_RIGHT_ROOK_MOVED) !== 0;\nexport const blackLeftRookMoved = board =>\n  (getState(board) & BLACK_LEFT_ROOK_MOVED) !== 0;\nexport const blackRightRookMoved = board =>\n  (getState(board) & BLACK_RIGHT_ROOK_MOVED) !== 0;\n\nexport const setWhiteKingMoved = board => {\n  board[board.length - 1] = getState(board) | WHITE_KING_MOVED;\n};\n\nexport const setBlackKingMoved = board => {\n  board[board.length - 1] = getState(board) | BLACK_KING_MOVED;\n};\n\nexport const setWhiteLeftRookMoved = board => {\n  board[board.length - 1] = getState(board) | WHITE_LEFT_ROOK_MOVED;\n};\n\nexport const setWhiteRightRookMoved = board => {\n  board[board.length - 1] = getState(board) | WHITE_RIGHT_ROOK_MOVED;\n};\n\nexport const setBlackLeftRookMoved = board => {\n  board[board.length - 1] = getState(board) | BLACK_LEFT_ROOK_MOVED;\n};\n\nexport const setBlackRightRookMoved = board => {\n  board[board.length - 1] = getState(board) | BLACK_RIGHT_ROOK_MOVED;\n};\n","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}","export default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}","/*\n * Chess App using React and Web Workers\n * Copyright (C) 2019 mhonert (https://github.com/mhonert)\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport const pieces = {\n  PAWN: {\n    id: 1,\n    name: 'Pawn',\n    value: 1\n  },\n\n  KNIGHT: {\n    id: 2,\n    name: 'Knight',\n    value: 3\n  },\n\n  BISHOP: {\n    id: 3,\n    name: 'Bishop',\n    value: 3\n  },\n\n  ROOK: {\n    id: 4,\n    name: 'Rook',\n    value: 5\n  },\n\n  QUEEN: {\n    id: 5,\n    name: 'Queen',\n    value: 9\n  },\n\n  KING: {\n    id: 6,\n    name: 'King',\n    value: 10 // actual value is not relevant => game is lost anyway in case of check mate\n  }\n};\n\nconst piecesSortedById = Object.values(pieces)\n  .sort((pieceA, pieceB) => pieceA.id - pieceB.id)\n  .map(value => value);\n\n\nexport const getPieceById = (pieceId) => {\n  return piecesSortedById[pieceId - 1];\n}\n\nexport const P = pieces.PAWN.id;\nexport const N = pieces.KNIGHT.id;\nexport const B = pieces.BISHOP.id;\nexport const R = pieces.ROOK.id;\nexport const Q = pieces.QUEEN.id;\nexport const K = pieces.KING.id;\n","/*\n * Chess App using React and Web Workers\n * Copyright (C) 2019 mhonert (https://github.com/mhonert)\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nimport {\n  BLACK,\n  blackKingMoved,\n  blackLeftRookMoved,\n  blackRightRookMoved,\n  BOARD_BORDER, EN_PASSANT,\n  getState,\n  setBlackKingMoved,\n  setBlackLeftRookMoved,\n  setBlackRightRookMoved,\n  setWhiteKingMoved,\n  setWhiteLeftRookMoved,\n  setWhiteRightRookMoved,\n  WHITE,\n  whiteKingMoved,\n  whiteLeftRookMoved,\n  whiteRightRookMoved\n} from './board';\nimport { getPieceById, pieces } from './pieces';\n\nconst isValidPawnMove = (\n  board,\n  activeColor,\n  piece,\n  start,\n  end,\n  ignoreCheck = false\n) => {\n  if (board[end] === BOARD_BORDER) {\n    return false;\n  }\n\n  const pieceColor = Math.sign(board[start]);\n  if (activeColor !== pieceColor) {\n    return false;\n  }\n\n  const targetPieceColor = Math.sign(board[end]);\n\n  if (pieceColor === targetPieceColor) {\n    return false;\n  }\n\n  if (\n    !ignoreCheck &&\n    moveResultsInCheck(board, { piece, start, end }, activeColor)\n  ) {\n    return false;\n  }\n\n  const direction = -pieceColor;\n\n  // Horizontal => 1 field move\n  if (end - start === 10 * direction && board[end] === 0) {\n    return true;\n  }\n\n  // Horizontal => 2 fields from base line\n  const baseLineStart = pieceColor === WHITE ? 81 : 31;\n  const baseLineEnd = pieceColor === WHITE ? 88 : 38;\n\n  const isBaseLine = start >= baseLineStart && start <= baseLineEnd;\n  const noObstacleInBetween = board[start + direction * 10] === 0;\n  if (\n    end - start === 20 * direction &&\n    isBaseLine &&\n    noObstacleInBetween &&\n    board[end] === 0\n  ) {\n    return true;\n  }\n\n  // Diagonal => hit other piece\n  if (\n    (end - start === 11 * direction || end - start === 9 * direction) &&\n    board[end] !== 0\n  ) {\n    return true;\n  }\n\n  if (\n    (end - start === 11 * direction || end - start === 9 * direction) &&\n    board[end] === 0 &&\n    enPassentPossible(board, pieceColor, end)\n  ) {\n    return true;\n  }\n\n  return false;\n};\n\nconst enPassentPossible = (board, pieceColor, pos) => {\n  const state = getState(board);\n  if (pos > 40 && pos < 49 && pieceColor === WHITE) {\n    return (state & EN_PASSANT[pos - 41]) !== 0;\n  } else if (pos > 70 && pos < 79 && pieceColor === BLACK) {\n    return (state & EN_PASSANT[pos - 71 + 8]) !== 0;\n  }\n\n  return false;\n};\n\nconst getPromoPieces = () => [\n  pieces.QUEEN,\n  pieces.ROOK,\n  pieces.BISHOP,\n  pieces.KNIGHT\n];\n\nconst generatePawnMoves = (board, activeColor, piece, start) => {\n  const direction = -activeColor;\n\n  if (activeColor === WHITE && start < 39) {\n    // Check white pawn promotion\n    return [9, 10, 11, 20]\n      .filter(offset =>\n        isValidPawnMove(\n          board,\n          activeColor,\n          piece,\n          start,\n          start + offset * direction\n        )\n      )\n      .flatMap(offset =>\n        getPromoPieces().map(promoPiece => ({\n          piece: promoPiece,\n          start,\n          end: start + offset * direction\n        }))\n      );\n  } else if (activeColor === BLACK && start > 80) {\n    // Check black pawn promotion\n    return [9, 10, 11, 20]\n      .filter(offset =>\n        isValidPawnMove(\n          board,\n          activeColor,\n          piece,\n          start,\n          start + offset * direction\n        )\n      )\n      .flatMap(offset =>\n        getPromoPieces().map(promoPiece => ({\n          piece: promoPiece,\n          start,\n          end: start + offset * direction\n        }))\n      );\n  }\n\n  return [9, 10, 11, 20]\n    .filter(offset =>\n      isValidPawnMove(\n        board,\n        activeColor,\n        piece,\n        start,\n        start + offset * direction\n      )\n    )\n    .map(offset => ({ piece, start, end: start + offset * direction }));\n};\n\nconst KNIGHT_DIRECTIONS = [21, 19, 12, 8, -12, -21, -19, -8];\n\nconst isValidKnightMove = (\n  board,\n  activeColor,\n  piece,\n  start,\n  end,\n  ignoreCheck = false\n) => {\n  if (board[end] === BOARD_BORDER) {\n    return false;\n  }\n\n  const pieceColor = Math.sign(board[start]);\n  if (activeColor !== pieceColor) {\n    return false;\n  }\n\n  const targetPieceColor = Math.sign(board[end]);\n\n  if (pieceColor === targetPieceColor) {\n    return false;\n  }\n\n  if (\n    !ignoreCheck &&\n    moveResultsInCheck(board, { piece, start, end }, activeColor)\n  ) {\n    return false;\n  }\n\n  return KNIGHT_DIRECTIONS.some(dir => end === start + dir);\n};\n\nconst generateKnightMoves = (board, activeColor, piece, start) => {\n  return KNIGHT_DIRECTIONS.filter(offset =>\n    isValidKnightMove(board, activeColor, piece, start, start + offset)\n  ).map(offset => ({ piece, start, end: start + offset }));\n};\n\nconst DIAGONAL_DIRECTIONS = [9, 11, -9, -11];\n\nconst isValidBishopMove = (\n  board,\n  activeColor,\n  piece,\n  start,\n  end,\n  ignoreCheck = false\n) => {\n  if (board[end] === BOARD_BORDER) {\n    return false;\n  }\n\n  const pieceColor = Math.sign(board[start]);\n  if (activeColor !== pieceColor) {\n    return false;\n  }\n\n  const targetPieceColor = Math.sign(board[end]);\n\n  if (pieceColor === targetPieceColor) {\n    return false;\n  }\n\n  if (\n    !ignoreCheck &&\n    moveResultsInCheck(board, { piece, start, end }, activeColor)\n  ) {\n    return false;\n  }\n\n  return DIAGONAL_DIRECTIONS.some(dir => {\n    for (let i = 1; i <= 7; i++) {\n      // Target reached?\n      if (end === start + dir * i) {\n        return true;\n      }\n\n      // Obstacle in the way?\n      if (board[start + dir * i] !== 0) {\n        return false;\n      }\n    }\n    return false;\n  });\n};\n\nconst generateBishopMoves = (board, activeColor, piece, start) => {\n  return DIAGONAL_DIRECTIONS.flatMap(offset => {\n    const moves = [];\n    for (let i = 1; i <= 7; i++) {\n      if (\n        !isValidBishopMove(board, activeColor, piece, start, start + offset * i)\n      ) {\n        if (board[start + offset * i] === 0) {\n          continue;\n        }\n        return moves;\n      }\n      moves.push({ piece, start, end: start + offset * i });\n    }\n    return moves;\n  });\n};\n\nconst ORTHOGONAL_DIRECTIONS = [1, 10, -1, -10];\n\nconst isValidRookMove = (\n  board,\n  activeColor,\n  piece,\n  start,\n  end,\n  ignoreCheck = false\n) => {\n  if (board[end] === BOARD_BORDER) {\n    return false;\n  }\n\n  const pieceColor = Math.sign(board[start]);\n  if (activeColor !== pieceColor) {\n    return false;\n  }\n\n  const targetPieceColor = Math.sign(board[end]);\n\n  if (pieceColor === targetPieceColor) {\n    return false;\n  }\n\n  if (\n    !ignoreCheck &&\n    moveResultsInCheck(board, { piece, start, end }, activeColor)\n  ) {\n    return false;\n  }\n\n  return ORTHOGONAL_DIRECTIONS.some(dir => {\n    for (let i = 1; i <= 7; i++) {\n      // Target reached?\n      if (end === start + dir * i) {\n        return true;\n      }\n\n      // Obstacle in the way?\n      if (board[start + dir * i] !== 0) {\n        return false;\n      }\n    }\n\n    return false;\n  });\n};\n\nconst generateRookMoves = (board, activeColor, piece, start) => {\n  return ORTHOGONAL_DIRECTIONS.flatMap(offset => {\n    const moves = [];\n    for (let i = 1; i <= 7; i++) {\n      if (\n        !isValidRookMove(board, activeColor, piece, start, start + offset * i)\n      ) {\n        if (board[start + offset * i] === 0) {\n          continue;\n        }\n        return moves;\n      }\n      moves.push({ piece, start, end: start + offset * i });\n    }\n    return moves;\n  });\n};\n\nconst isValidQueenMove = (\n  board,\n  activeColor,\n  piece,\n  start,\n  end,\n  ignoreCheck = false\n) => {\n  return (\n    isValidBishopMove(board, activeColor, piece, start, end, ignoreCheck) ||\n    isValidRookMove(board, activeColor, piece, start, end, ignoreCheck)\n  );\n};\n\nconst generateQueenMoves = (board, activeColor, piece, start) => {\n  return generateBishopMoves(board, activeColor, piece, start).concat(\n    generateRookMoves(board, activeColor, piece, start)\n  );\n};\n\nconst KING_DIRECTIONS = ORTHOGONAL_DIRECTIONS.concat(DIAGONAL_DIRECTIONS);\n\nconst isValidKingMove = (\n  board,\n  activeColor,\n  piece,\n  start,\n  end,\n  ignoreCheck = false\n) => {\n  if (board[end] === BOARD_BORDER) {\n    return false;\n  }\n\n  const pieceColor = Math.sign(board[start]);\n  if (activeColor !== pieceColor) {\n    return false;\n  }\n\n  const targetPieceColor = Math.sign(board[end]);\n\n  if (pieceColor === targetPieceColor) {\n    return false;\n  }\n\n  // White: Small castle\n  if (!whiteKingMoved(board)) {\n    if (\n      !whiteRightRookMoved(board) &&\n      activeColor === WHITE &&\n      start === 95 &&\n      end === 97 &&\n      board[96] === 0 &&\n      board[97] === 0 &&\n      !isAttacked(board, -activeColor, 95) &&\n      !isAttacked(board, -activeColor, 96) &&\n      !isAttacked(board, -activeColor, 97)\n    ) {\n      return true;\n    }\n\n    // White: Big castle\n    if (\n      !whiteLeftRookMoved(board) &&\n      activeColor === WHITE &&\n      start === 95 &&\n      end === 93 &&\n      board[94] === 0 &&\n      board[93] === 0 &&\n      board[92] === 0 &&\n      !isAttacked(board, -activeColor, 95) &&\n      !isAttacked(board, -activeColor, 94) &&\n      !isAttacked(board, -activeColor, 93) &&\n      !isAttacked(board, -activeColor, 92)\n    ) {\n      return true;\n    }\n  }\n\n  if (!blackKingMoved(board)) {\n    // Black: Small castle\n    if (\n      !blackRightRookMoved(board) &&\n      activeColor === BLACK &&\n      start === 25 &&\n      end === 27 &&\n      board[26] === 0 &&\n      board[27] === 0 &&\n      !isAttacked(board, -activeColor, 25) &&\n      !isAttacked(board, -activeColor, 26) &&\n      !isAttacked(board, -activeColor, 27)\n    ) {\n      return true;\n    }\n\n    // Black: Big castle\n    if (\n      !blackLeftRookMoved(board) &&\n      activeColor === BLACK &&\n      start === 25 &&\n      end === 23 &&\n      board[24] === 0 &&\n      board[23] === 0 &&\n      board[22] === 0 &&\n      !isAttacked(board, -activeColor, 25) &&\n      !isAttacked(board, -activeColor, 24) &&\n      !isAttacked(board, -activeColor, 23) &&\n      !isAttacked(board, -activeColor, 22)\n    ) {\n      return true;\n    }\n  }\n\n  const validDirection = KING_DIRECTIONS.some(dir => start + dir === end);\n\n  return (\n    validDirection &&\n    (ignoreCheck ||\n      !moveResultsInCheck(board, { piece, start, end }, activeColor))\n  );\n};\n\nconst generateKingMoves = (board, activeColor, piece, start) => {\n  const moves = KING_DIRECTIONS.filter(offset =>\n    isValidKingMove(board, activeColor, piece, start, start + offset)\n  ).map(offset => ({ piece, start, end: start + offset }));\n\n  if (\n    (activeColor === WHITE && start === 95) ||\n    (activeColor === BLACK && start === 25)\n  ) {\n    if (isValidKingMove(board, activeColor, piece, start, start + 2)) {\n      moves.push({ piece, start, end: start + 2 });\n    }\n    if (isValidKingMove(board, activeColor, piece, start, start - 2)) {\n      moves.push({ piece, start, end: start - 2 });\n    }\n  }\n\n  return moves;\n};\n\nexport const performMove = (board, move) => {\n  const { piece, start, end } = move;\n  const pieceColor = Math.sign(board[start]);\n\n  let removedFigure = board[end];\n\n  board[start] = 0;\n  if (piece.id === 1 && board[end] === 0) {\n    if (Math.abs(start - end) === 9) {\n      // En passant\n      removedFigure = board[start + pieceColor];\n      board[start + pieceColor] = 0;\n      move.enPassant = true;\n    } else if (Math.abs(start - end) === 11) {\n      // En passant\n      removedFigure = board[start - pieceColor];\n      board[start - pieceColor] = 0;\n      move.enPassant = true;\n    }\n  }\n  board[end] = piece.id * pieceColor;\n\n  if (piece.id === 6) {\n    if (pieceColor === WHITE) {\n      setWhiteKingMoved(board);\n    } else {\n      setBlackKingMoved(board);\n    }\n\n    if (Math.abs(start - end) === 2) {\n      // Castle\n      if (end === 97) {\n        board[96] = board[98];\n        board[98] = 0;\n        setWhiteRightRookMoved(board);\n      } else if (end === 93) {\n        board[94] = board[91];\n        board[91] = 0;\n        setWhiteLeftRookMoved(board);\n      } else if (end === 27) {\n        board[26] = board[28];\n        board[28] = 0;\n        setBlackRightRookMoved(board);\n      } else if (end === 23) {\n        board[24] = board[21];\n        board[21] = 0;\n        setBlackLeftRookMoved(board);\n      }\n    }\n  }\n\n  if (piece.id === 4) {\n    if (start === 91) {\n      setWhiteLeftRookMoved(board);\n    } else if (start === 98) {\n      setWhiteRightRookMoved(board);\n    } else if (start === 21) {\n      setBlackLeftRookMoved(board);\n    } else if (start === 28) {\n      setBlackRightRookMoved(board);\n    }\n  }\n\n  clearEnPassentPossible(board);\n\n  if (piece.id === 1 && Math.abs(start - end) === 20) {\n    setEnPassentPossible(board, start, pieceColor);\n  }\n\n  return removedFigure;\n};\n\nconst clearEnPassentPossible = board => {\n  board[board.length - 1] = getState(board) & (EN_PASSANT[0] - 1);\n};\n\nconst setEnPassentPossible = (board, pos, color) => {\n  const index = color === BLACK ? pos - 31 : pos - 81 + 8;\n  board[board.length - 1] = getState(board) | EN_PASSANT[index];\n};\n\nexport const undoMove = (\n  board,\n  { start, end, piece, enPassant },\n  removedFigure,\n  previousState\n) => {\n  board[board.length - 1] = previousState;\n  board[start] = board[end];\n  board[end] = enPassant ? 0 : removedFigure;\n\n  if (enPassant) {\n    const pieceColor = Math.sign(board[start]);\n\n    if (Math.abs(start - end) === 9) {\n      board[start + pieceColor] = removedFigure;\n    } else if (Math.abs(start - end) === 11) {\n      board[start - pieceColor] = removedFigure;\n    }\n  }\n\n  if (piece.id === 6) {\n    if (Math.abs(start - end) === 2) {\n      // Undo Castle\n      if (end === 97) {\n        board[98] = board[96];\n        board[96] = 0;\n      } else if (end === 93) {\n        board[91] = board[94];\n        board[94] = 0;\n      } else if (end === 27) {\n        board[28] = board[26];\n        board[26] = 0;\n      } else if (end === 23) {\n        board[21] = board[24];\n        board[24] = 0;\n      }\n    }\n  }\n};\n\nexport const isInCheck = (board, activeColor) => {\n  const kingPos = board.findIndex(\n    item => item === pieces.KING.id * activeColor\n  );\n  if (!kingPos) {\n    return true;\n  }\n\n  return isAttacked(board, -activeColor, kingPos);\n};\n\nexport const moveResultsInCheck = (board, move, activeColor) => {\n  const previousState = getState(board);\n  const removedFigure = performMove(board, move);\n  const check = isInCheck(board, activeColor);\n  undoMove(board, move, removedFigure, previousState);\n\n  return check;\n};\n\nconst isValidMoveFns = [\n  isValidPawnMove,\n  isValidKnightMove,\n  isValidBishopMove,\n  isValidRookMove,\n  isValidQueenMove,\n  isValidKingMove\n];\n\nexport const isValidMove = (board, playerColor, piece, start, end) => {\n  const isValidMove = isValidMoveFns[piece.id - 1];\n\n  return isValidMove(board, playerColor, piece, start, end, true);\n}\n\nexport const isAttacked = (board, opponentColor, position) => {\n  return board.some((item, index) => {\n    if (index === board.length - 1) {\n      return false;\n    }\n\n    if (item === 0 || item === BOARD_BORDER) {\n      return false;\n    }\n\n    const pieceColor = Math.sign(item);\n    if (pieceColor !== opponentColor) {\n      return false;\n    }\n\n    const pieceId = Math.abs(item);\n    const piece = getPieceById(pieceId);\n    const isValidMove = isValidMoveFns[pieceId - 1];\n\n    return isValidMove(board, opponentColor, piece, index, position, true);\n  });\n};\n\nconst generateMovesFns = [\n  generatePawnMoves,\n  generateKnightMoves,\n  generateBishopMoves,\n  generateRookMoves,\n  generateQueenMoves,\n  generateKingMoves\n];\n\nexport const generateMoves = (board, activeColor) => {\n  return board.flatMap((item, index) => {\n    if (index === board.length - 1) {\n      return [];\n    }\n\n    if (item === 0 || item === BOARD_BORDER) {\n      return [];\n    }\n\n    const pieceColor = Math.sign(item);\n    if (pieceColor !== activeColor) {\n      return [];\n    }\n\n    const pieceId = Math.abs(item);\n    const piece = getPieceById(pieceId);\n    const generateMovesFn = generateMovesFns[pieceId - 1];\n\n    return generateMovesFn(board, activeColor, piece, index);\n  });\n};\n\nexport const isCheckMate = (board, activeColor) => {\n  return (\n    isInCheck(board, activeColor) &&\n    generateMoves(board, activeColor).length === 0\n  );\n};\n","/*\n * Chess App using React and Web Workers\n * Copyright (C) 2019 mhonert (https://github.com/mhonert)\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nimport memoize from 'memoizee';\nimport {\n  generateMoves,\n  isAttacked,\n  isCheckMate,\n  performMove,\n  undoMove\n} from './move-generation';\nimport { getPieceById, K, P, pieces, R } from './pieces';\nimport {\n  BLACK,\n  blackKingMoved,\n  blackLeftRookMoved,\n  blackRightRookMoved,\n  BOARD_BORDER,\n  EMPTY,\n  getState,\n  WHITE,\n  whiteKingMoved,\n  whiteLeftRookMoved,\n  whiteRightRookMoved\n} from './board';\n\n/** Returns the current row (0-7) for the given board index (21-98)\n */\nexport const boardRowFromIndex = index => (index - 21) % 10;\n\n/** Evaluates the current position and generates a score.\n *  Scores below 0 are better for the black and above 0 better for the white player.\n *\n * @param board\n * @returns {number} Position score\n */\nexport const evaluatePosition = board => {\n  // Check mate is the best possible score for the other player\n  if (isCheckMate(board, WHITE)) {\n    return -100000; // best score for black\n  } else if (isCheckMate(board, BLACK)) {\n    return 100000; // best score for white\n  }\n\n  let materialValue = 0;\n  let positionValue = 0;\n  let whiteBishops = 0;\n  let blackBishops = 0;\n  let whiteKnights = 0;\n  let blackKnights = 0;\n\n  let whitePawnRows = 0;\n  let blackPawnRows = 0;\n  for (let i = 21; i <= 98; i++) {\n    const pieceId = board[i];\n    if (\n      pieceId === EMPTY ||\n      pieceId === BOARD_BORDER ||\n      Math.abs(pieceId) === pieces.KING.id\n    ) {\n      continue;\n    }\n\n    // Sum of all piece values (material) on the board\n    const pieceValue = getPieceById(Math.abs(pieceId)).value;\n    materialValue += pieceValue * Math.sign(pieceId);\n\n    if (pieceId === -1) {\n      const rowBitPattern = 1 << boardRowFromIndex(i);\n      if ((blackPawnRows & rowBitPattern) !== 0) {\n        positionValue += 5; // worse score for double pawns\n      } else {\n        blackPawnRows |= rowBitPattern;\n      }\n    } else if (pieceId === 1) {\n      const rowBitPattern = 1 << boardRowFromIndex(i);\n      if ((whitePawnRows & rowBitPattern) !== 0) {\n        positionValue -= 5; // worse score for double pawns\n      } else {\n        whitePawnRows |= rowBitPattern;\n      }\n    } else if (pieceId === -2) {\n      blackKnights++;\n    } else if (pieceId === 2) {\n      whiteKnights++;\n    } else if (pieceId === -3) {\n      blackBishops++;\n    } else if (pieceId === 3) {\n      whiteBishops++;\n    }\n\n    // Bonus point for pieces outside the starting positions\n    if (i >= 41 && i <= 88) {\n      if (board[i] < -1 && board[i] > -4) {\n        positionValue -= 2;\n      } else if (board[i] > 1 && board[i] < 4) {\n        positionValue += 2;\n      }\n    }\n  }\n\n  // Bonus points if knights exist as pair\n  if (whiteKnights === 2) {\n    positionValue += 400;\n  }\n\n  if (blackKnights === 2) {\n    positionValue -= 400;\n  }\n\n  // Bonus points if bishops exist as pair\n  if (whiteBishops === 2) {\n    positionValue += 600;\n  }\n\n  if (blackBishops === 2) {\n    positionValue -= 600;\n  }\n\n  // Bonus points, if pawns occupy the center positions\n  if (board[54] === -1) {\n    positionValue -= 2;\n  }\n\n  if (board[55] === -1) {\n    positionValue -= 2;\n  }\n\n  if (board[64] === 1) {\n    positionValue += 2;\n  }\n\n  if (board[65] === 1) {\n    positionValue += 2;\n  }\n\n  // Bonus points if pieces involved in castling have not yet moved\n  let castleValue = 0;\n\n  if (whiteKingMoved(board)) {\n    castleValue--;\n  }\n\n  if (whiteRightRookMoved(board)) {\n    castleValue--;\n  }\n\n  if (whiteLeftRookMoved(board)) {\n    castleValue--;\n  }\n\n  if (blackKingMoved(board)) {\n    castleValue++;\n  }\n\n  if (blackRightRookMoved(board)) {\n    castleValue++;\n  }\n\n  if (blackLeftRookMoved(board)) {\n    castleValue++;\n  }\n\n  // Bonus points for safe castle positions\n  if (\n    board[27] === -K &&\n    board[26] === -R &&\n    board[36] === -P &&\n    board[37] === -P &&\n    board[38] === -P\n  ) {\n    castleValue -= 10;\n  } else if (\n    board[22] === -K &&\n    board[23] === -R &&\n    board[31] === -P &&\n    board[32] === -P &&\n    board[33] === -P\n  ) {\n    castleValue -= 10;\n  }\n\n  if (\n    board[97] === K &&\n    board[96] === R &&\n    board[86] === P &&\n    board[87] === P &&\n    board[88] === P\n  ) {\n    castleValue += 10;\n  } else if (\n    board[92] === K &&\n    board[93] === R &&\n    board[81] === P &&\n    board[82] === P &&\n    board[83] === P\n  ) {\n    castleValue += 10;\n  }\n\n  for (let i = 31; i <= 33; i++) {\n    if (board[i] !== -1) {\n      castleValue++;\n    }\n  }\n\n  for (let i = 36; i <= 38; i++) {\n    if (board[i] !== -1) {\n      castleValue++;\n    }\n  }\n\n  for (let i = 81; i <= 83; i++) {\n    if (board[i] !== 1) {\n      castleValue--;\n    }\n  }\n\n  for (let i = 86; i <= 88; i++) {\n    if (board[i] !== 1) {\n      castleValue--;\n    }\n  }\n\n  return materialValue * 1000 + positionValue + castleValue;\n};\n\n// Evaluate board position with the given move performed\nconst evaluateMoveScore = (board, move) => {\n  const previousState = getState(board);\n  const removedFigure = performMove(board, move);\n  const score = evaluatePosition(board);\n  undoMove(board, move, removedFigure, previousState);\n  return score;\n};\n\nconst movesSortedByScore = (board, moves, playerColor) => {\n  return moves\n    .map(move => ({ ...move, score: evaluateMoveScore(board, move) }))\n    .sort((moveA, moveB) => playerColor * (moveB.score - moveA.score));\n};\n\n/** Finds the best move for the current player color.\n *\n * @param board\n * @param playerColor BLACK (-1) or WHITE (1)\n * @param remainingHalfMoves Half moves to search for\n */\nexport const findBestMove = (board, playerColor, remainingHalfMoves) => {\n  let alpha = -10000000000;\n  let beta = 10000000000;\n\n  const [score, move] = recFindBestMove(\n    board,\n    alpha,\n    beta,\n    playerColor,\n    remainingHalfMoves,\n    0,\n    true\n  );\n\n  return move;\n};\n\n// If a check mate position can be achieved, then earlier check mates should have a better score than later check mates\n// to prevent unnecessary delays.\nconst adjustScore = (board, realDepth) => {\n  const score = evaluatePosition(board);\n\n  if (score === 100000) {\n    return score + (100 - realDepth);\n  } else if (score === -100000) {\n    return score - (100 - realDepth);\n  }\n\n  return score;\n};\n\n// Recursively calls itself with alternating player colors to\n// find the best possible move in response to the current board position.\n//\nconst recFindBestMove = (\n  board,\n  alpha,\n  beta,\n  playerColor,\n  remainingLevels,\n  depth,\n  isRoot\n) => {\n  if (remainingLevels <= 0) {\n    return [adjustScore(board, depth) * playerColor, null];\n  }\n\n  const moves = movesSortedByScore(\n    board,\n    generateMoves(board, playerColor),\n    playerColor\n  );\n\n  if (moves.length === 0) {\n    // no more moves possible (i.e. check mate or stale mate)\n    return [adjustScore(board, depth) * playerColor, null];\n  }\n\n  let bestScore = -10000000;\n  let bestMove = null;\n\n  // Use memoized version of this function to save intermediate results in a cache\n  // (except for the last level to reduce required cache size)\n  const findMoveFn = remainingLevels > 1 ? memRecFindBestMove : recFindBestMove;\n\n  for (const move of moves) {\n    const previousState = getState(board);\n    const removedFigure = performMove(board, move);\n\n    let [unadjustedScore] = findMoveFn(\n      board,\n      -beta,\n      -alpha,\n      -playerColor,\n      remainingLevels - 1,\n      depth + 1,\n      false\n    );\n\n    const score = -unadjustedScore;\n    undoMove(board, move, removedFigure, previousState);\n\n    // Use mini-max algorithm ...\n    if (score > bestScore) {\n      bestScore = score;\n      bestMove = move;\n      bestMove.score = score;\n    }\n\n    // ... with alpha-beta-pruning to eliminate unnecessary branches of the search tree:\n    alpha = Math.max(alpha, bestScore);\n    if (alpha >= beta) {\n      break;\n    }\n  }\n\n  return isRoot ? [bestScore, bestMove] : [bestScore, null]; // do not return actual move for sub-levels to save memory in the memoization cache\n};\n\n// Memoize (cache) intermediate results for recFindBestMove function\nconst memRecFindBestMove = memoize(recFindBestMove, {\n  max: 500000,\n  normalizer: function(args) {\n    const board = args[0];\n    let boardKey = '';\n    for (let i = 21; i <= 98; i++) {\n      boardKey += board[i];\n    }\n\n    return boardKey + args[3] + args[4]; // board, playerColor and remainingLevels\n  }\n});\n","/*\n * Chess App using React and Web Workers\n * Copyright (C) 2019 mhonert (https://github.com/mhonert)\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */import{findBestMove}from'./engine';export function calculateMove(board,playerColor,depth){console.log('Start calculation of move ...');var move=findBestMove(board,playerColor,depth);console.log('Calculation finished',move.score);return{start:move.start,end:move.end,piece:{id:move.piece.id,name:move.piece.name}};}\naddEventListener('message', function (e) {var ref = e.data;var type = ref.type;var method = ref.method;var id = ref.id;var params = ref.params;var f,p;if (type === 'RPC' && method) {if (f = __webpack_exports__[method]) {p = Promise.resolve().then(function () { return f.apply(__webpack_exports__, params); });} else {p = Promise.reject('No such method');}p.then(function (result) {postMessage({type: 'RPC',id: id,result: result});}).catch(function (e) {var error = {message: e};if (e.stack) {error.message = e.message;error.stack = e.stack;error.name = e.name;}postMessage({type: 'RPC',id: id,error: error});});}});postMessage({type: 'RPC',method: 'ready'});"],"sourceRoot":""}